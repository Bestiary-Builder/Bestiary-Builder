import{d as B,b as k,e as g,f as p,g as f,h as $,i as D,o as n,j as m,k as y,w as l,l as x,m as a,c as M,n as N,t as S,p as F,F as P}from"./index-CzugAerY.js";import{_ as T}from"./Modal.vue_vue_type_style_index_0_lang-BHItbCPq.js";import{B as V}from"./BestiaryList-KPa6HW05.js";import{t as r,_ as L}from"./Breadcrumbs.vue_vue_type_style_index_0_lang-XGvkMyhF.js";import{$ as _}from"./loading-DaZpVn2J.js";import"./StatusIcon-Cgc3-ELO.js";const j={class:"content"},z={key:1,class:"zero-found"},A=a("span",null," You do not have any bestiaries. ",-1),E=a("p",{class:"modal-desc"}," Please confirm you want to permanently delete this bestiary. This action is not reversible. ",-1),J=B({__name:"PersonalBestiaryList",setup(O){const b=k();g(async()=>{const t=_.show();await c(),t.hide()});const i=p([]),c=async()=>{const{success:t,data:e,error:s}=await f("/api/my-bestiaries");t?i.value=e:(i.value=[],r.error(s))},v=async()=>{const{success:t,data:e,error:s}=await f("/api/bestiary/add","POST",{name:"New bestiary",description:"",status:"private",creatures:[]});t?(r.success("Created bestiary"),await b.push(`/bestiary-viewer/${e._id?.toString()}`)):r.error(s),await c()},w=async t=>{if(!t)return;const e=_.show(),{success:s,error:d}=await f(`/api/bestiary/${t._id?.toString()}/delete`);s?(r.success("Deleted bestiary succesfully"),o.value=!1):r.error(d),e.hide(),await c()},o=p(!1),u=p(null),h=t=>{u.value=t,o.value=!0};return(t,e)=>{const s=$("font-awesome-icon"),d=D("tooltip");return n(),m(P,null,[y(L,{routes:[{path:"",text:"My Bestiaries",isCurrent:!0}]},{default:l(()=>[x((n(),m("button",{class:"inverted","aria-label":"Create bestiary",onClick:v},[y(s,{icon:["fas","plus"]})])),[[d,"Create bestiary!"]])]),_:1}),a("div",j,[i.value?(n(),M(V,{key:0,personal:!0,bestiaries:i.value,onDeleteBestiary:h},null,8,["bestiaries"])):(n(),m("div",z,[A,a("button",{class:"btn confirm",onClick:v}," Create a bestiary ")]))]),y(T,{show:o.value,onClose:e[2]||(e[2]=C=>o.value=!1)},{header:l(()=>[N(" Are you sure you want to delete "+S(u.value?.name),1)]),body:l(()=>[E]),footer:l(()=>[a("button",{class:"btn",onClick:e[0]||(e[0]=C=>o.value=!1)}," Cancel "),a("button",{class:"btn danger",onClick:e[1]||(e[1]=F(()=>w(u.value),["prevent"]))}," Confirm ")]),_:1},8,["show"])],64)}}});export{J as default};
