import{d as $,e as L,f as c,q as N,g as V,s as y,h as w,i as U,o as t,j as s,k as u,w as v,l as d,v as z,m as a,u as x,x as D,y as A,c as j,n as C,t as I,z as q,F as E,A as O,B as R,_ as Y}from"./index-D8D5dkx3.js";import{B as G}from"./BestiaryList-DrURiinr.js";import{t as P,_ as H}from"./Breadcrumbs.vue_vue_type_style_index_0_lang-BSZsEjpX.js";import{$ as B}from"./loading-C2u3ja_a.js";import"./StatusIcon-C9GX4WTw.js";const b=h=>(O("data-v-554b025c"),h=h(),R(),h),J=b(()=>a("option",null,"Recent",-1)),K=b(()=>a("option",null,"Popular",-1)),Q=b(()=>a("option",null,"Bookmarked",-1)),W=[J,K,Q],X={"aria-label":"Filter bestiaries"},Z={class:"v-popper__custom-menu"},ee=b(()=>a("span",null,[a("label",{for:"tagsInput"},"Filter by tags")],-1)),ae={"aria-label":"Search bestiaries"},te={class:"v-popper__custom-menu"},se=b(()=>a("span",null,[a("label",{for:"searchinput"}," Search bestiaries by name or description")],-1)),oe={class:"content"},ie={key:1,class:"zero-found"},ne={key:0},le={key:1},re={key:0,class:"page-nav__container"},ce=$({__name:"PublicBestiaryList",setup(h){L(async()=>{const o=B.show();await m(),o.hide()});const i=c([]),n=c(1),f=c([]),p=c("Popular"),g=c(""),M=N(g,600),_=c(1),m=async()=>{const{success:o,data:e,error:r}=await V("/api/search","POST",{search:g.value,page:n.value-1,tags:f.value,mode:p.value.toLowerCase()});o?(i.value=e.results,_.value=e.pageAmount):(i.value=[],_.value=1,P.error(r))},F=async()=>{const{success:o,data:e,error:r}=await V("/api/user/bookmarks");o?i.value=e:(i.value=[],P.error(r))};return y(n,()=>m()),y(f,()=>m()),y(p,async o=>{if(o!=="Bookmarked"){const e=B.show();await m(),e.hide()}else{const e=B.show();await F(),e.hide()}}),y(M,()=>m()),(o,e)=>{const r=w("font-awesome-icon"),T=w("v-select"),S=w("VDropdown"),k=U("tooltip");return t(),s(E,null,[u(H,{routes:[{path:"",text:"Public Bestiaries",isCurrent:!0}]},{default:v(()=>[d(a("select",{"onUpdate:modelValue":e[0]||(e[0]=l=>p.value=l),"aria-label":"Select public bestiary list mode",name:"Select public bestiary list mode"},W,512),[[z,p.value]]),u(S,{distance:6,"positioning-disabled":!1},{popper:v(()=>[a("div",Z,[ee,u(T,{modelValue:f.value,"onUpdate:modelValue":e[1]||(e[1]=l=>f.value=l),placeholder:"Select Tags",multiple:"",options:x(D).tags,"input-id":"tagsInput"},null,8,["modelValue","options"])])]),default:v(()=>[d((t(),s("button",X,[u(r,{icon:["fas","tag"]})])),[[k,"Filter bestiaries"]])]),_:1}),u(S,{distance:6,"positioning-disabled":x(D).isMobile},{popper:v(()=>[a("div",te,[se,d(a("input",{id:"searchinput","onUpdate:modelValue":e[2]||(e[2]=l=>g.value=l),type:"text",placeholder:"Search by bestiary name or description"},null,512),[[A,g.value]])])]),default:v(()=>[d((t(),s("button",ae,[u(r,{icon:["fas","magnifying-glass"]})])),[[k,"Search bestiaries"]])]),_:1},8,["positioning-disabled"])]),_:1}),a("div",oe,[i.value&&i.value.length>0?(t(),j(G,{key:0,personal:!1,bestiaries:i.value},null,8,["bestiaries"])):(t(),s("div",ie,[p.value!=="Bookmarked"?(t(),s("span",ne," Did not find any Bestiaries with that name or tags.")):(t(),s("span",le,"You do not have any bookmarked bestiaries. View a Bestiary and click on the ⭐ icon to bookmark it."))]))]),_.value>1?(t(),s("div",re,[d((t(),s("button",{"aria-label":"Decrease page number",onClick:e[3]||(e[3]=l=>n.value=Math.max(1,n.value-1))},[C(" - ")])),[[k,"Decrease page number"]]),a("span",null,I(n.value)+"/"+I(_.value),1),d((t(),s("button",{"aria-label":"Increase page number",onClick:e[4]||(e[4]=l=>n.value=Math.min(_.value,n.value+1))},[C(" + ")])),[[k,"Increase page number"]])])):q("",!0)],64)}}}),ve=Y(ce,[["__scopeId","data-v-554b025c"]]);export{ve as default};
