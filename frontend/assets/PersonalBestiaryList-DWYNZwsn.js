import{e as B,u as k,f as g,y,g as f,r as $,I as D,o as n,c as p,b as m,z as l,J as x,d as a,A as M,k as N,t as S,w as F,F as P}from"./index-4NFuNW__.js";import{_ as T}from"./Modal.vue_vue_type_style_index_0_lang-B8RzU35K.js";import{B as V}from"./BestiaryList-CjTRZlKC.js";import{t as r,_ as z}from"./Breadcrumbs.vue_vue_type_style_index_0_lang-ByvQ2SDW.js";import{$ as _}from"./loading-BJE89vqI.js";import"./StatusIcon-DsZ3hoDt.js";const A={class:"content"},L={key:1,class:"zero-found"},E=a("span",null," You do not have any bestiaries. ",-1),I=a("p",{class:"modal-desc"}," Please confirm you want to permanently delete this bestiary. This action is not reversible. ",-1),H=B({__name:"PersonalBestiaryList",setup(J){const b=k();g(async()=>{const t=_.show();await c(),t.hide()});const i=y([]),c=async()=>{const{success:t,data:e,error:s}=await f("/api/my-bestiaries");t?i.value=e:(i.value=[],r.error(s))},v=async()=>{const{success:t,data:e,error:s}=await f("/api/bestiary/add","POST",{name:"New bestiary",description:"",status:"private",creatures:[]});t?(r.success("Created bestiary"),await b.push(`/bestiary-viewer/${e._id?.toString()}`)):r.error(s),await c()},w=async t=>{if(!t)return;const e=_.show(),{success:s,error:d}=await f(`/api/bestiary/${t._id?.toString()}/delete`);s?(r.success("Deleted bestiary succesfully"),o.value=!1):r.error(d),e.hide(),await c()},o=y(!1),u=y(null),h=t=>{u.value=t,o.value=!0};return(t,e)=>{const s=$("font-awesome-icon"),d=D("tooltip");return n(),p(P,null,[m(z,{routes:[{path:"",text:"My Bestiaries",isCurrent:!0}]},{default:l(()=>[x((n(),p("button",{class:"inverted","aria-label":"Create bestiary",onClick:v},[m(s,{icon:["fas","plus"]})])),[[d,"Create bestiary!"]])]),_:1}),a("div",A,[i.value?(n(),M(V,{key:0,personal:!0,bestiaries:i.value,onDeleteBestiary:h},null,8,["bestiaries"])):(n(),p("div",L,[E,a("button",{class:"btn confirm",onClick:v}," Create a bestiary ")]))]),m(T,{show:o.value,onClose:e[2]||(e[2]=C=>o.value=!1)},{header:l(()=>[N(" Are you sure you want to delete "+S(u.value?.name),1)]),body:l(()=>[I]),footer:l(()=>[a("button",{class:"btn",onClick:e[0]||(e[0]=C=>o.value=!1)}," Cancel "),a("button",{class:"btn danger",onClick:e[1]||(e[1]=F(()=>w(u.value),["prevent"]))}," Confirm ")]),_:1},8,["show"])],64)}}});export{H as default};
