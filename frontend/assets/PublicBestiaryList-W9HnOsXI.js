import{e as T,B as $,q as c,X as N,i as V,C as y,r as w,L as U,o as t,c as s,b as u,v,M as d,R,d as a,u as x,s as C,P as j,x as q,g as D,t as P,h as z,F as A,p as E,j as O,_ as X}from"./index-Qg_Jh5vw.js";import{B as Y}from"./BestiaryList-qvejivkE.js";import{t as I,_ as G}from"./Breadcrumbs.vue_vue_type_style_index_0_lang-DEGxZsjc.js";import{$ as B}from"./loading-eEk9Zn1e.js";import"./StatusIcon-BfO8JYX5.js";const b=h=>(E("data-v-554b025c"),h=h(),O(),h),H=b(()=>a("option",null,"Recent",-1)),J=b(()=>a("option",null,"Popular",-1)),K=b(()=>a("option",null,"Bookmarked",-1)),Q=[H,J,K],W={"aria-label":"Filter bestiaries"},Z={class:"v-popper__custom-menu"},ee=b(()=>a("span",null,[a("label",{for:"tagsInput"},"Filter by tags")],-1)),ae={"aria-label":"Search bestiaries"},te={class:"v-popper__custom-menu"},se=b(()=>a("span",null,[a("label",{for:"searchinput"}," Search bestiaries by name or description")],-1)),oe={class:"content"},ie={key:1,class:"zero-found"},ne={key:0},le={key:1},re={key:0,class:"page-nav__container"},ce=T({__name:"PublicBestiaryList",setup(h){$(async()=>{const o=B.show();await m(),o.hide()});const i=c([]),n=c(1),g=c([]),p=c("Popular"),f=c(""),M=N(f,600),_=c(1),m=async()=>{const{success:o,data:e,error:r}=await V("/api/search","POST",{search:f.value,page:n.value-1,tags:g.value,mode:p.value.toLowerCase()});o?(i.value=e.results,_.value=e.pageAmount):(i.value=[],_.value=1,I.error(r))},F=async()=>{const{success:o,data:e,error:r}=await V("/api/user/bookmarks");o?i.value=e:(i.value=[],I.error(r))};return y(n,()=>m()),y(g,()=>m()),y(p,async o=>{if(o!=="Bookmarked"){const e=B.show();await m(),e.hide()}else{const e=B.show();await F(),e.hide()}}),y(M,()=>m()),(o,e)=>{const r=w("font-awesome-icon"),L=w("v-select"),S=w("VDropdown"),k=U("tooltip");return t(),s(A,null,[u(G,{routes:[{path:"",text:"Public Bestiaries",isCurrent:!0}]},{default:v(()=>[d(a("select",{"onUpdate:modelValue":e[0]||(e[0]=l=>p.value=l),"aria-label":"Select public bestiary list mode",name:"Select public bestiary list mode"},Q,512),[[R,p.value]]),u(S,{distance:6,"positioning-disabled":!1},{popper:v(()=>[a("div",Z,[ee,u(L,{modelValue:g.value,"onUpdate:modelValue":e[1]||(e[1]=l=>g.value=l),placeholder:"Select Tags",multiple:"",options:x(C).tags,"input-id":"tagsInput"},null,8,["modelValue","options"])])]),default:v(()=>[d((t(),s("button",W,[u(r,{icon:["fas","tag"]})])),[[k,"Filter bestiaries"]])]),_:1}),u(S,{distance:6,"positioning-disabled":x(C).isMobile},{popper:v(()=>[a("div",te,[se,d(a("input",{id:"searchinput","onUpdate:modelValue":e[2]||(e[2]=l=>f.value=l),type:"text",placeholder:"Search by bestiary name or description"},null,512),[[j,f.value]])])]),default:v(()=>[d((t(),s("button",ae,[u(r,{icon:["fas","magnifying-glass"]})])),[[k,"Search bestiaries"]])]),_:1},8,["positioning-disabled"])]),_:1}),a("div",oe,[i.value&&i.value.length>0?(t(),q(Y,{key:0,personal:!1,bestiaries:i.value},null,8,["bestiaries"])):(t(),s("div",ie,[p.value!=="Bookmarked"?(t(),s("span",ne," Did not find any Bestiaries with that name or tags.")):(t(),s("span",le,"You do not have any bookmarked bestiaries. View a Bestiary and click on the ⭐ icon to bookmark it."))]))]),_.value>1?(t(),s("div",re,[d((t(),s("button",{"aria-label":"Decrease page number",onClick:e[3]||(e[3]=l=>n.value=Math.max(1,n.value-1))},[D(" - ")])),[[k,"Decrease page number"]]),a("span",null,P(n.value)+"/"+P(_.value),1),d((t(),s("button",{"aria-label":"Increase page number",onClick:e[4]||(e[4]=l=>n.value=Math.min(_.value,n.value+1))},[D(" + ")])),[[k,"Increase page number"]])])):z("",!0)],64)}}}),ve=X(ce,[["__scopeId","data-v-554b025c"]]);export{ve as default};
