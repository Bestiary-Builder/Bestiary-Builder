import{e as B,A as k,B as g,q as p,i as y,r as $,L as D,o as n,c as f,b as m,v as l,M as x,d as a,x as M,g as N,t as S,w as F,F as L}from"./index-Qg_Jh5vw.js";import{_ as P}from"./Modal.vue_vue_type_style_index_0_lang-B_6qs_5e.js";import{B as T}from"./BestiaryList-qvejivkE.js";import{t as r,_ as V}from"./Breadcrumbs.vue_vue_type_style_index_0_lang-DEGxZsjc.js";import{$ as _}from"./loading-eEk9Zn1e.js";import"./StatusIcon-BfO8JYX5.js";const A={class:"content"},q={key:1,class:"zero-found"},z=a("span",null," You do not have any bestiaries. ",-1),E=a("p",{class:"modal-desc"}," Please confirm you want to permanently delete this bestiary. This action is not reversible. ",-1),J=B({__name:"PersonalBestiaryList",setup(O){const b=k();g(async()=>{const t=_.show();await c(),t.hide()});const i=p([]),c=async()=>{const{success:t,data:e,error:s}=await y("/api/my-bestiaries");t?i.value=e:(i.value=[],r.error(s))},v=async()=>{const{success:t,data:e,error:s}=await y("/api/bestiary/add","POST",{name:"New bestiary",description:"",status:"private",creatures:[]});t?(r.success("Created bestiary"),await b.push(`/bestiary-viewer/${e._id?.toString()}`)):r.error(s),await c()},w=async t=>{if(!t)return;const e=_.show(),{success:s,error:d}=await y(`/api/bestiary/${t._id?.toString()}/delete`);s?(r.success("Deleted bestiary succesfully"),o.value=!1):r.error(d),e.hide(),await c()},o=p(!1),u=p(null),h=t=>{u.value=t,o.value=!0};return(t,e)=>{const s=$("font-awesome-icon"),d=D("tooltip");return n(),f(L,null,[m(V,{routes:[{path:"",text:"My Bestiaries",isCurrent:!0}]},{default:l(()=>[x((n(),f("button",{class:"inverted","aria-label":"Create bestiary",onClick:v},[m(s,{icon:["fas","plus"]})])),[[d,"Create bestiary!"]])]),_:1}),a("div",A,[i.value?(n(),M(T,{key:0,personal:!0,bestiaries:i.value,onDeleteBestiary:h},null,8,["bestiaries"])):(n(),f("div",q,[z,a("button",{class:"btn confirm",onClick:v}," Create a bestiary ")]))]),m(P,{show:o.value,onClose:e[2]||(e[2]=C=>o.value=!1)},{header:l(()=>[N(" Are you sure you want to delete "+S(u.value?.name),1)]),body:l(()=>[E]),footer:l(()=>[a("button",{class:"btn",onClick:e[0]||(e[0]=C=>o.value=!1)}," Cancel "),a("button",{class:"btn danger",onClick:e[1]||(e[1]=F(()=>w(u.value),["prevent"]))}," Confirm ")]),_:1},8,["show"])],64)}}});export{J as default};
