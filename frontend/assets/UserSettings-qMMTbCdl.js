import{_ as w,r as k,o as r,c as a,b as h,d as e,e as B,u as v,f as S,s,g,h as j,i as t,w as m,j as C,k as o,t as l,l as p,F as I,p as Y,m as $}from"./index-D0ZWZ-Gp.js";import{t as _,_ as L}from"./Breadcrumbs.vue_vue_type_style_index_0_lang-BfUIaZHf.js";const P={},T={href:"https://www.patreon.com/join/BestiaryBuilder",class:"patreon"},x=e("span",null," Become a patreon ",-1);function D(u,y){const d=k("font-awesome-icon");return r(),a("a",T,[h(d,{icon:"fa-brands fa-patreon"}),x])}const N=w(P,[["render",D]]),i=u=>(Y("data-v-d27b8070"),u=u(),$(),u),F={class:"content less-wide"},U={key:0},V=i(()=>e("p",null," You are not logged in. Login with Discord to log in.",-1)),A=i(()=>e("hr",null,null,-1)),R={key:1},M={key:0,class:"patreon"},E=i(()=>e("p",null," If you enjoy using our site, consider supporting us on Patreon! As a Patreon, you will have several benefits and your support will help Bestiary Builder stay online. ",-1)),G={class:"center"},J={key:1},W=i(()=>e("b",null," Wyrmling ",-1)),q={key:2},z=i(()=>e("b",null," Greatwyrm ",-1)),H=i(()=>e("hr",null,null,-1)),K=B({__name:"UserSettings",setup(u){const y=v();S(async()=>{const n=new URLSearchParams(window.location.search).get("code");if(n&&!s.user){const{success:f,error:b}=await g(`/api/login/${n}`);f?(_.success("Succesfully logged in"),window.location.href=j()):(_.error(b),await y.push("/user"))}});const d=async()=>{const{success:c,error:n}=await g("/api/logout");c?location.reload():_.error(n)};return(c,n)=>(r(),a(I,null,[h(L,{routes:[{path:"",text:"User Settings",isCurrent:!0}],"is-less-wide":!0}),e("div",F,[t(s).user?(r(),a("div",R,[e("p",null,[o(" You are logged in to Bestiary Builder with Discord as "),e("b",null,l(t(s).user.username),1),o(".")]),e("p",null,[o(" You have been a user of Bestiary Builder since "),e("b",null,l(t(s).user.joinedAt?new Date(t(s).user.joinedAt).toDateString():"Not Found"),1),o(".")]),e("p",null,[o(" You have created "),e("b",null,l(t(s).user.bestiaries.length),1),o(" bestiaries since then.")]),e("p",null,[o(" Your user id is "),e("code",null,l(t(s).user._id),1),o(".")]),t(s).user.supporter===0?(r(),a("p",M)):p("",!0),E,e("span",G,[h(N)]),t(s).user.supporter===1?(r(),a("p",J,[o(" You support us on Patreon as a "),W,o(" Tier supporter. Thank you so much for your pledge! If you cannot see your name display change on the website yet, make sure to join our discord. ")])):p("",!0),t(s).user.supporter===2?(r(),a("p",q,[o(" You support us on Patreon as a "),z,o(" Tier supporter. Thank you so much for your support! If you cannot see your name display change on the website yet, make sure to join our discord. ")])):p("",!0),H,e("button",{class:"btn",onClick:m(d,["prevent"])}," Log out of Bestiary Builder ")])):(r(),a("div",U,[V,A,e("button",{class:"btn confirm",onClick:n[0]||(n[0]=m(f=>t(C)(c.$route.path),["prevent"]))}," Login ")]))])],64))}}),X=w(K,[["__scopeId","data-v-d27b8070"]]);export{X as default};
