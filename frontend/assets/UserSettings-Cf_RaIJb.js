import{_ as b,h as k,o as u,j as i,k as f,l as s,d as B,G as o,D as c,g as p,K as d,u as n,p as g,n as t,t as a,B as m,m as v,O as C,F as j,P as x}from"./index-s8_WzPNw.js";import{_ as D}from"./Breadcrumbs.vue_vue_type_style_index_0_lang-B464TyWA.js";const Y={},P={href:"https://www.patreon.com/join/BestiaryBuilder",class:"patreon"};function T(w,l){const r=k("font-awesome-icon");return u(),i("a",P,[f(r,{icon:"fa-brands fa-patreon"}),l[0]||(l[0]=s("span",null," Become a patreon ",-1))])}const _=b(Y,[["render",T]]),N={class:"content less-wide"},S={key:0},V={key:1},$={key:0,class:"patreon"},A={class:"center"},F={key:1},I={key:2},L={class:"emails"},U=B({__name:"UserSettings",setup(w){const l=async()=>{const{success:r,error:e}=await p("/api/logout");r?location.reload():d.error(e)};return console.log(o.user),c(()=>o.user?.emails,async()=>{if(o.user)if(o.user.emails){const{success:r,error:e}=await p("/api/subscribe");r||(d.error(e),o.user.emails=!1)}else{const{success:r,error:e}=await p("/api/unsubscribe");r||(d.error(e),o.user.emails=!1)}}),(r,e)=>(u(),i(j,null,[f(D,{routes:[{path:"",text:"User Settings",isCurrent:!0}],"is-less-wide":!0}),s("div",N,[n(o).user?(u(),i("div",V,[s("p",null,[e[4]||(e[4]=t(" You are logged in to Bestiary Builder with Discord as ")),s("b",null,a(n(o).user.username),1),e[5]||(e[5]=t(". "))]),s("p",null,[e[6]||(e[6]=t(" You have been a user of Bestiary Builder since ")),s("b",null,a(n(o).user.joinedAt?new Date(n(o).user.joinedAt).toDateString():"Not Found"),1),e[7]||(e[7]=t(". "))]),s("p",null,[e[8]||(e[8]=t(" You have created ")),s("b",null,a(n(o).user.bestiaries.length),1),e[9]||(e[9]=t(" bestiaries since then. "))]),s("p",null,[e[10]||(e[10]=t(" Your user id is ")),s("code",null,a(n(o).user._id),1),e[11]||(e[11]=t(". "))]),n(o).user.supporter===0?(u(),i("p",$)):m("",!0),e[15]||(e[15]=s("p",null," If you enjoy using our site, consider supporting us on Patreon! As a Patreon, you will have several benefits and your support will help Bestiary Builder stay online. ",-1)),s("span",A,[f(_)]),n(o).user.supporter===1?(u(),i("p",F,e[12]||(e[12]=[t(" You support us on Patreon as a "),s("b",null," Wyrmling ",-1),t(" Tier supporter. Thank you so much for your pledge! If you cannot see your name display change on the website yet, make sure to join our discord. ")]))):m("",!0),n(o).user.supporter===2?(u(),i("p",I,e[13]||(e[13]=[t(" You support us on Patreon as a "),s("b",null," Greatwyrm ",-1),t(" Tier supporter. Thank you so much for your support! If you cannot see your name display change on the website yet, make sure to join our discord. ")]))):m("",!0),e[16]||(e[16]=s("hr",null,null,-1)),s("span",L,[s("label",null,[v(s("input",{type:"checkbox",id:"emails","onUpdate:modelValue":e[1]||(e[1]=y=>n(o).user.emails=y)},null,512),[[C,n(o).user.emails]]),e[14]||(e[14]=s("span",null,"Allow announcement emails",-1))])]),e[17]||(e[17]=s("hr",null,null,-1)),s("button",{class:"btn",onClick:g(l,["prevent"])}," Log out of Bestiary Builder ")])):(u(),i("div",S,[e[2]||(e[2]=s("p",null,"You are not logged in. Login with Discord to log in.",-1)),e[3]||(e[3]=s("hr",null,null,-1)),s("button",{class:"btn confirm",onClick:e[0]||(e[0]=g(y=>n(x)(r.$route.path),["prevent"]))}," Login ")]))])],64))}}),K=b(U,[["__scopeId","data-v-bd17f40b"]]);export{K as default};
