import{d as B,b as h,e as k,f,g as p,K as r,h as g,i as $,o as n,j as y,k as m,w as l,l as a,c as D,F as x,m as M,n as S,t as N,p as F}from"./index-s8_WzPNw.js";import{_ as P}from"./Modal.vue_vue_type_style_index_0_lang-Bm0_1Sj7.js";import{B as T}from"./BestiaryList-kJO8iNjC.js";import{_ as V}from"./Breadcrumbs.vue_vue_type_style_index_0_lang-B464TyWA.js";import{$ as K}from"./loading-8atZ4P8l.js";import"./StatusIcon-BsKmhsOM.js";const L={class:"content"},j={key:1,class:"zero-found"},G=B({__name:"PersonalBestiaryList",setup(z){const b=h();k(async()=>{await c()});const i=f([]),c=async()=>{const{success:s,data:e,error:t}=await p("/api/my-bestiaries");s?i.value=e:(i.value=[],r.error(t))},v=async()=>{const{success:s,data:e,error:t}=await p("/api/bestiary/add","POST",{name:"New bestiary",description:"",status:"private",creatures:[]});s?(r.success("Successfully created bestiary."),await b.push(`/bestiary-viewer/${e._id?.toString()}`)):r.error(t),await c()},w=async s=>{if(!s)return;const e=K.show(),{success:t,error:d}=await p(`/api/bestiary/${s._id?.toString()}/delete`);t?(r.success("Deleted the bestiary succesfully."),o.value=!1):r.error(d),e.hide(),await c()},o=f(!1),u=f(null),_=s=>{u.value=s,o.value=!0};return(s,e)=>{const t=g("font-awesome-icon"),d=$("tooltip");return n(),y(x,null,[m(V,{routes:[{path:"",text:"My Bestiaries",isCurrent:!0}]},{default:l(()=>[M((n(),y("button",{class:"inverted","aria-label":"Create bestiary",onClick:v},[m(t,{icon:["fas","plus"]})])),[[d,"Create bestiary!"]])]),_:1}),a("div",L,[i.value?(n(),D(T,{key:0,personal:!0,bestiaries:i.value,onDeleteBestiary:_},null,8,["bestiaries"])):(n(),y("div",j,[e[3]||(e[3]=a("span",null," You do not have any bestiaries. ",-1)),a("button",{class:"btn confirm",onClick:v}," Create a bestiary ")]))]),m(P,{show:o.value,onClose:e[2]||(e[2]=C=>o.value=!1)},{header:l(()=>[S(" Are you sure you want to delete "+N(u.value?.name),1)]),body:l(()=>e[4]||(e[4]=[a("p",{class:"modal-desc"}," Please confirm you want to permanently delete this bestiary. This action is not reversible. ",-1)])),footer:l(()=>[a("button",{class:"btn",onClick:e[0]||(e[0]=C=>o.value=!1)}," Cancel "),a("button",{class:"btn danger",onClick:e[1]||(e[1]=F(()=>w(u.value),["prevent"]))}," Confirm ")]),_:1},8,["show"])],64)}}});export{G as default};
