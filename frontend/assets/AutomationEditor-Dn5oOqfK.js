import{d as I,bx as ft,I as z,L as It,D as P,aJ as xe,e as fe,W as Mt,f as q,c$ as kt,aT as M,h as ee,i as Ke,u as s,o as m,c as D,w as y,G as je,B as O,l as a,n as E,j as k,x as K,m as S,k as d,t as Z,F as V,_ as U,p as Se,b5 as ae,Y as zt,z as oe,g as de,H as A,E as Q,b2 as Ut,bN as Bt,b7 as We,y as Gt,O as H,r as Yt,bD as Zt,bi as it,N as Xe,K as se,b0 as Xt}from"./index-s8_WzPNw.js";import{L as h,v as en,w as tn}from"./constants-DRaXo_2c.js";import"./markdownItAnchor-VSsJ9PWr.js";import{_ as et}from"./Markdown.vue_vue_type_script_setup_true_lang-D5cXIZdi.js";var nn=Object.defineProperty,ln=Object.defineProperties,on=Object.getOwnPropertyDescriptors,St=Object.getOwnPropertySymbols,an=Object.prototype.hasOwnProperty,rn=Object.prototype.propertyIsEnumerable,$t=(l,e,n)=>e in l?nn(l,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):l[e]=n,tt=(l,e)=>{for(var n in e||(e={}))an.call(e,n)&&$t(l,n,e[n]);if(St)for(var n of St(e))rn.call(e,n)&&$t(l,n,e[n]);return l},sn=(l,e)=>ln(l,on(e));const nt={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}};function un(l,e){const n=z(()=>{const{width:o,height:i}=l;return sn(tt({},nt.wrapper),{width:o,height:i})}),t=z(()=>tt(tt({},nt.fullWidth),!e.value&&nt.hide));return{wrapperStyle:n,containerStyle:t}}function dn(){const l=ft(kt.__getMonacoInstance()),e=q(!1);let n;return fe(()=>{l.value||(n=kt.init(),n.then(o=>l.value=o).catch(o=>{o?.type!=="cancelation"&&(e.value=!0,console.error("Monaco initialization error:",o))}))}),{monacoRef:l,unload:()=>n?.cancel(),isLoadFailed:e}}function _t(l){return typeof l=="function"?l():l}function at(l){return l===void 0}function Lt(l,e,n,t){return fn(l,t)||cn(l,e,n,t)}function fn(l,e){return l.editor.getModel(xt(l,e))}function cn(l,e,n,t){return l.editor.createModel(e,n,t?xt(l,t):void 0)}function xt(l,e){return l.Uri.parse(e)}var pn=Object.defineProperty,Ot=Object.getOwnPropertySymbols,mn=Object.prototype.hasOwnProperty,vn=Object.prototype.propertyIsEnumerable,At=(l,e,n)=>e in l?pn(l,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):l[e]=n,gn=(l,e)=>{for(var n in e||(e={}))mn.call(e,n)&&At(l,n,e[n]);if(Ot)for(var n of Ot(e))vn.call(e,n)&&At(l,n,e[n]);return l};const yn={display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"};var hn=I({name:"VueMonacoEditor",model:{prop:"value",event:"update:value"},props:{defaultValue:String,defaultPath:String,defaultLanguage:String,value:String,language:String,path:String,theme:{type:String,default:"vs"},line:Number,options:{type:Object,default:()=>({})},overrideServices:{type:Object,default:()=>({})},saveViewState:{type:Boolean,default:!0},width:{type:[Number,String],default:"100%"},height:{type:[Number,String],default:"100%"},className:String},emits:["update:value","beforeMount","mount","change","validate"],setup(l,e){const n=new Map,t=ft(null),{monacoRef:o,unload:i,isLoadFailed:r}=dn(),{editorRef:c}=bn(e,l,o,t),{disposeValidator:u}=wn(e,l,o,c),f=z(()=>!!o.value&&!!c.value),{wrapperStyle:w,containerStyle:p}=un(l,f);return It(()=>{var v,b;(v=u.value)==null||v.call(u),c.value?((b=c.value.getModel())==null||b.dispose(),c.value.dispose()):i()}),P([()=>l.path,()=>l.value,()=>l.language,()=>l.line],([v,b,_,g],[$,C,T,B])=>{if(f.value){if(v!==$){const L=Lt(o.value,b||l.defaultValue||"",_||l.defaultLanguage||"",v||l.defaultPath||"");l.saveViewState&&n.set($,c.value.saveViewState()),c.value.setModel(L),l.saveViewState&&c.value.restoreViewState(n.get(v)),at(g)||c.value.revealLine(g);return}c.value.getValue()!==b&&c.value.setValue(b),_!==T&&o.value.editor.setModelLanguage(c.value.getModel(),_),!at(g)&&g!==B&&c.value.revealLine(g)}}),P(()=>l.options,v=>c.value&&c.value.updateOptions(v),{deep:!0}),P(()=>l.theme,v=>o.value&&o.value.editor.setTheme(v)),{containerRef:t,isEditorReady:f,isLoadFailed:r,wrapperStyle:w,containerStyle:p}},render(){const{$slots:l,isEditorReady:e,isLoadFailed:n,wrapperStyle:t,containerStyle:o,className:i}=this;return xe("div",{style:t},[!e&&xe("div",{style:yn},n?l.failure?_t(l.failure):"load failed":l.default?_t(l.default):"loading..."),xe("div",{ref:"containerRef",key:"monaco_editor_container",style:o,class:i})])}});function bn({emit:l},e,n,t){const o=ft(null);fe(()=>{const r=P(n,()=>{t.value&&n.value&&(Mt(()=>r()),i())},{immediate:!0})});function i(){var r;if(!t.value||!n.value||o.value)return;l("beforeMount",n.value);const c=e.path||e.defaultPath,u=Lt(n.value,e.value||e.defaultValue||"",e.language||e.defaultLanguage||"",c||"");o.value=n.value.editor.create(t.value,gn({model:u,theme:e.theme,automaticLayout:!0,autoIndent:"brackets",formatOnPaste:!0,formatOnType:!0},e.options),e.overrideServices),(r=o.value)==null||r.onDidChangeModelContent(f=>{const w=o.value.getValue();w!==e.value&&(l("update:value",w),l("change",w,f))}),o.value&&!at(e.line)&&o.value.revealLine(e.line),l("mount",o.value,n.value)}return{editorRef:o}}function wn({emit:l},e,n,t){const o=q(null),i=P([n,t],()=>{if(n.value&&t.value){Mt(()=>i());const r=n.value.editor.onDidChangeMarkers(c=>{var u,f;const w=(f=(u=t.value)==null?void 0:u.getModel())==null?void 0:f.uri;if(w&&c.find(v=>v.path===w.path)){const v=n.value.editor.getModelMarkers({resource:w});l("validate",v)}});o.value=()=>r?.dispose()}});return{disposeValidator:o}}const ct=Symbol.for("yaml.alias"),kn=Symbol.for("yaml.document"),ge=Symbol.for("yaml.map"),jt=Symbol.for("yaml.pair"),pt=Symbol.for("yaml.scalar"),Te=Symbol.for("yaml.seq"),ie=Symbol.for("yaml.node.type"),$e=l=>!!l&&typeof l=="object"&&l[ie]===ct,Qe=l=>!!l&&typeof l=="object"&&l[ie]===kn,Dt=l=>!!l&&typeof l=="object"&&l[ie]===ge,J=l=>!!l&&typeof l=="object"&&l[ie]===jt,F=l=>!!l&&typeof l=="object"&&l[ie]===pt,mt=l=>!!l&&typeof l=="object"&&l[ie]===Te;function Y(l){if(l&&typeof l=="object")switch(l[ie]){case ge:case Te:return!0}return!1}function W(l){if(l&&typeof l=="object")switch(l[ie]){case ct:case ge:case pt:case Te:return!0}return!1}const Sn=l=>(F(l)||Y(l))&&!!l.anchor,me=Symbol("break visit"),$n=Symbol("skip children"),Ae=Symbol("remove node");function Ne(l,e){const n=_n(e);Qe(l)?be(null,l.contents,n,Object.freeze([l]))===Ae&&(l.contents=null):be(null,l,n,Object.freeze([]))}Ne.BREAK=me;Ne.SKIP=$n;Ne.REMOVE=Ae;function be(l,e,n,t){const o=On(l,e,n,t);if(W(o)||J(o))return An(l,t,o),be(l,o,n,t);if(typeof o!="symbol"){if(Y(e)){t=Object.freeze(t.concat(e));for(let i=0;i<e.items.length;++i){const r=be(i,e.items[i],n,t);if(typeof r=="number")i=r-1;else{if(r===me)return me;r===Ae&&(e.items.splice(i,1),i-=1)}}}else if(J(e)){t=Object.freeze(t.concat(e));const i=be("key",e.key,n,t);if(i===me)return me;i===Ae&&(e.key=null);const r=be("value",e.value,n,t);if(r===me)return me;r===Ae&&(e.value=null)}}return o}function _n(l){return typeof l=="object"&&(l.Collection||l.Node||l.Value)?Object.assign({Alias:l.Node,Map:l.Node,Scalar:l.Node,Seq:l.Node},l.Value&&{Map:l.Value,Scalar:l.Value,Seq:l.Value},l.Collection&&{Map:l.Collection,Seq:l.Collection},l):l}function On(l,e,n,t){if(typeof n=="function")return n(l,e,t);if(Dt(e))return n.Map?.(l,e,t);if(mt(e))return n.Seq?.(l,e,t);if(J(e))return n.Pair?.(l,e,t);if(F(e))return n.Scalar?.(l,e,t);if($e(e))return n.Alias?.(l,e,t)}function An(l,e,n){const t=e[e.length-1];if(Y(t))t.items[l]=n;else if(J(t))l==="key"?t.key=n:t.value=n;else if(Qe(t))t.contents=n;else{const o=$e(t)?"alias":"scalar";throw new Error(`Cannot replace node with ${o} parent`)}}function Pt(l){if(/[\x00-\x19\s,[\]{}]/.test(l)){const n=`Anchor must not contain whitespace or control characters: ${JSON.stringify(l)}`;throw new Error(n)}return!0}function Oe(l,e,n,t){if(t&&typeof t=="object")if(Array.isArray(t))for(let o=0,i=t.length;o<i;++o){const r=t[o],c=Oe(l,t,String(o),r);c===void 0?delete t[o]:c!==r&&(t[o]=c)}else if(t instanceof Map)for(const o of Array.from(t.keys())){const i=t.get(o),r=Oe(l,t,o,i);r===void 0?t.delete(o):r!==i&&t.set(o,r)}else if(t instanceof Set)for(const o of Array.from(t)){const i=Oe(l,t,o,o);i===void 0?t.delete(o):i!==o&&(t.delete(o),t.add(i))}else for(const[o,i]of Object.entries(t)){const r=Oe(l,t,o,i);r===void 0?delete t[o]:r!==i&&(t[o]=r)}return l.call(e,n,t)}function ne(l,e,n){if(Array.isArray(l))return l.map((t,o)=>ne(t,String(o),n));if(l&&typeof l.toJSON=="function"){if(!n||!Sn(l))return l.toJSON(e,n);const t={aliasCount:0,count:1,res:void 0};n.anchors.set(l,t),n.onCreate=i=>{t.res=i,delete n.onCreate};const o=l.toJSON(e,n);return n.onCreate&&n.onCreate(o),o}return typeof l=="bigint"&&!n?.keep?Number(l):l}class vt{constructor(e){Object.defineProperty(this,ie,{value:e})}clone(){const e=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return this.range&&(e.range=this.range.slice()),e}toJS(e,{mapAsMap:n,maxAliasCount:t,onAnchor:o,reviver:i}={}){if(!Qe(e))throw new TypeError("A document argument is required");const r={anchors:new Map,doc:e,keep:!0,mapAsMap:n===!0,mapKeyWarned:!1,maxAliasCount:typeof t=="number"?t:100},c=ne(this,"",r);if(typeof o=="function")for(const{count:u,res:f}of r.anchors.values())o(f,u);return typeof i=="function"?Oe(i,{"":c},"",c):c}}class En extends vt{constructor(e){super(ct),this.source=e,Object.defineProperty(this,"tag",{set(){throw new Error("Alias nodes cannot have tags")}})}resolve(e){let n;return Ne(e,{Node:(t,o)=>{if(o===this)return Ne.BREAK;o.anchor===this.source&&(n=o)}}),n}toJSON(e,n){if(!n)return{source:this.source};const{anchors:t,doc:o,maxAliasCount:i}=n,r=this.resolve(o);if(!r){const u=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new ReferenceError(u)}let c=t.get(r);if(c||(ne(r,null,n),c=t.get(r)),!c||c.res===void 0){const u="This should not happen: Alias anchor was not resolved?";throw new ReferenceError(u)}if(i>=0&&(c.count+=1,c.aliasCount===0&&(c.aliasCount=De(o,r,t)),c.count*c.aliasCount>i)){const u="Excessive alias count indicates a resource exhaustion attack";throw new ReferenceError(u)}return c.res}toString(e,n,t){const o=`*${this.source}`;if(e){if(Pt(this.source),e.options.verifyAliasOrder&&!e.anchors.has(this.source)){const i=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new Error(i)}if(e.implicitKey)return`${o} `}return o}}function De(l,e,n){if($e(e)){const t=e.resolve(l),o=n&&t&&n.get(t);return o?o.count*o.aliasCount:0}else if(Y(e)){let t=0;for(const o of e.items){const i=De(l,o,n);i>t&&(t=i)}return t}else if(J(e)){const t=De(l,e.key,n),o=De(l,e.value,n);return Math.max(t,o)}return 1}const Ft=l=>!l||typeof l!="function"&&typeof l!="object";class x extends vt{constructor(e){super(pt),this.value=e}toJSON(e,n){return n?.keep?this.value:ne(this.value,e,n)}toString(){return String(this.value)}}x.BLOCK_FOLDED="BLOCK_FOLDED";x.BLOCK_LITERAL="BLOCK_LITERAL";x.PLAIN="PLAIN";x.QUOTE_DOUBLE="QUOTE_DOUBLE";x.QUOTE_SINGLE="QUOTE_SINGLE";function Vn(l,e,n){return n.find(t=>t.identify?.(l)&&!t.format)}function Re(l,e,n){if(Qe(l)&&(l=l.contents),W(l))return l;if(J(l)){const p=n.schema[ge].createNode?.(n.schema,null,n);return p.items.push(l),p}(l instanceof String||l instanceof Number||l instanceof Boolean||typeof BigInt<"u"&&l instanceof BigInt)&&(l=l.valueOf());const{aliasDuplicateObjects:t,onAnchor:o,onTagObj:i,schema:r,sourceObjects:c}=n;let u;if(t&&l&&typeof l=="object"){if(u=c.get(l),u)return u.anchor||(u.anchor=o(l)),new En(u.anchor);u={anchor:null,node:null},c.set(l,u)}let f=Vn(l,e,r.tags);if(!f){if(l&&typeof l.toJSON=="function"&&(l=l.toJSON()),!l||typeof l!="object"){const p=new x(l);return u&&(u.node=p),p}f=l instanceof Map?r[ge]:Symbol.iterator in Object(l)?r[Te]:r[ge]}i&&(i(f),delete n.onTagObj);const w=f?.createNode?f.createNode(n.schema,l,n):typeof f?.nodeClass?.from=="function"?f.nodeClass.from(n.schema,l,n):new x(l);return f.default||(w.tag=f.tag),u&&(u.node=w),w}function Et(l,e,n){let t=n;for(let o=e.length-1;o>=0;--o){const i=e[o];if(typeof i=="number"&&Number.isInteger(i)&&i>=0){const r=[];r[i]=t,t=r}else t=new Map([[i,t]])}return Re(t,void 0,{aliasDuplicateObjects:!1,keepUndefined:!1,onAnchor:()=>{throw new Error("This should not happen, please report a bug.")},schema:l,sourceObjects:new Map})}const Nn=l=>l==null||typeof l=="object"&&!!l[Symbol.iterator]().next().done;class Rt extends vt{constructor(e,n){super(e),Object.defineProperty(this,"schema",{value:n,configurable:!0,enumerable:!1,writable:!0})}clone(e){const n=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return e&&(n.schema=e),n.items=n.items.map(t=>W(t)||J(t)?t.clone(e):t),this.range&&(n.range=this.range.slice()),n}addIn(e,n){if(Nn(e))this.add(n);else{const[t,...o]=e,i=this.get(t,!0);if(Y(i))i.addIn(o,n);else if(i===void 0&&this.schema)this.set(t,Et(this.schema,o,n));else throw new Error(`Expected YAML collection at ${t}. Remaining path: ${o}`)}}deleteIn(e){const[n,...t]=e;if(t.length===0)return this.delete(n);const o=this.get(n,!0);if(Y(o))return o.deleteIn(t);throw new Error(`Expected YAML collection at ${n}. Remaining path: ${t}`)}getIn(e,n){const[t,...o]=e,i=this.get(t,!0);return o.length===0?!n&&F(i)?i.value:i:Y(i)?i.getIn(o,n):void 0}hasAllNullValues(e){return this.items.every(n=>{if(!J(n))return!1;const t=n.value;return t==null||e&&F(t)&&t.value==null&&!t.commentBefore&&!t.comment&&!t.tag})}hasIn(e){const[n,...t]=e;if(t.length===0)return this.has(n);const o=this.get(n,!0);return Y(o)?o.hasIn(t):!1}setIn(e,n){const[t,...o]=e;if(o.length===0)this.set(t,n);else{const i=this.get(t,!0);if(Y(i))i.setIn(o,n);else if(i===void 0&&this.schema)this.set(t,Et(this.schema,o,n));else throw new Error(`Expected YAML collection at ${t}. Remaining path: ${o}`)}}}const Cn=l=>l.replace(/^(?!$)(?: $)?/gm,"#");function Ce(l,e){return/^\n+$/.test(l)?l.substring(1):e?l.replace(/^(?! *$)/gm,e):l}const we=(l,e,n)=>l.endsWith(`
`)?Ce(n,e):n.includes(`
`)?`
`+Ce(n,e):(l.endsWith(" ")?"":" ")+n,qt="flow",rt="block",Pe="quoted";function ze(l,e,n="flow",{indentAtStart:t,lineWidth:o=80,minContentWidth:i=20,onFold:r,onOverflow:c}={}){if(!o||o<0)return l;o<i&&(i=0);const u=Math.max(1+i,1+o-e.length);if(l.length<=u)return l;const f=[],w={};let p=o-e.length;typeof t=="number"&&(t>o-Math.max(2,i)?f.push(0):p=o-t);let v,b,_=!1,g=-1,$=-1,C=-1;n===rt&&(g=Vt(l,g,e.length),g!==-1&&(p=g+u));for(let B;B=l[g+=1];){if(n===Pe&&B==="\\"){switch($=g,l[g+1]){case"x":g+=3;break;case"u":g+=5;break;case"U":g+=9;break;default:g+=1}C=g}if(B===`
`)n===rt&&(g=Vt(l,g,e.length)),p=g+e.length+u,v=void 0;else{if(B===" "&&b&&b!==" "&&b!==`
`&&b!=="	"){const L=l[g+1];L&&L!==" "&&L!==`
`&&L!=="	"&&(v=g)}if(g>=p)if(v)f.push(v),p=v+u,v=void 0;else if(n===Pe){for(;b===" "||b==="	";)b=B,B=l[g+=1],_=!0;const L=g>C+1?g-2:$-1;if(w[L])return l;f.push(L),w[L]=!0,p=L+u,v=void 0}else _=!0}b=B}if(_&&c&&c(),f.length===0)return l;r&&r();let T=l.slice(0,f[0]);for(let B=0;B<f.length;++B){const L=f[B],j=f[B+1]||l.length;L===0?T=`
${e}${l.slice(0,j)}`:(n===Pe&&w[L]&&(T+=`${l[L]}\\`),T+=`
${e}${l.slice(L+1,j)}`)}return T}function Vt(l,e,n){let t=e,o=e+1,i=l[o];for(;i===" "||i==="	";)if(e<o+n)i=l[++e];else{do i=l[++e];while(i&&i!==`
`);t=e,o=e+1,i=l[o]}return t}const Ge=(l,e)=>({indentAtStart:e?l.indent.length:l.indentAtStart,lineWidth:l.options.lineWidth,minContentWidth:l.options.minContentWidth}),Ye=l=>/^(%|---|\.\.\.)/m.test(l);function Tn(l,e,n){if(!e||e<0)return!1;const t=e-n,o=l.length;if(o<=t)return!1;for(let i=0,r=0;i<o;++i)if(l[i]===`
`){if(i-r>t)return!0;if(r=i+1,o-r<=t)return!1}return!0}function Ee(l,e){const n=JSON.stringify(l);if(e.options.doubleQuotedAsJSON)return n;const{implicitKey:t}=e,o=e.options.doubleQuotedMinMultiLineLength,i=e.indent||(Ye(l)?"  ":"");let r="",c=0;for(let u=0,f=n[u];f;f=n[++u])if(f===" "&&n[u+1]==="\\"&&n[u+2]==="n"&&(r+=n.slice(c,u)+"\\ ",u+=1,c=u,f="\\"),f==="\\")switch(n[u+1]){case"u":{r+=n.slice(c,u);const w=n.substr(u+2,4);switch(w){case"0000":r+="\\0";break;case"0007":r+="\\a";break;case"000b":r+="\\v";break;case"001b":r+="\\e";break;case"0085":r+="\\N";break;case"00a0":r+="\\_";break;case"2028":r+="\\L";break;case"2029":r+="\\P";break;default:w.substr(0,2)==="00"?r+="\\x"+w.substr(2):r+=n.substr(u,6)}u+=5,c=u+1}break;case"n":if(t||n[u+2]==='"'||n.length<o)u+=1;else{for(r+=n.slice(c,u)+`

`;n[u+2]==="\\"&&n[u+3]==="n"&&n[u+4]!=='"';)r+=`
`,u+=2;r+=i,n[u+2]===" "&&(r+="\\"),u+=1,c=u+1}break;default:u+=1}return r=c?r+n.slice(c):n,t?r:ze(r,i,Pe,Ge(e,!1))}function st(l,e){if(e.options.singleQuote===!1||e.implicitKey&&l.includes(`
`)||/[ \t]\n|\n[ \t]/.test(l))return Ee(l,e);const n=e.indent||(Ye(l)?"  ":""),t="'"+l.replace(/'/g,"''").replace(/\n+/g,`$&
${n}`)+"'";return e.implicitKey?t:ze(t,n,qt,Ge(e,!1))}function ke(l,e){const{singleQuote:n}=e.options;let t;if(n===!1)t=Ee;else{const o=l.includes('"'),i=l.includes("'");o&&!i?t=st:i&&!o?t=Ee:t=n?st:Ee}return t(l,e)}let ut;try{ut=new RegExp(`(^|(?<!
))
+(?!
|$)`,"g")}catch{ut=/\n+(?!\n|$)/g}function Fe({comment:l,type:e,value:n},t,o,i){const{blockQuote:r,commentString:c,lineWidth:u}=t.options;if(!r||/\n[\t ]+$/.test(n)||/^\s*$/.test(n))return ke(n,t);const f=t.indent||(t.forceBlockIndent||Ye(n)?"  ":""),w=r==="literal"?!0:r==="folded"||e===x.BLOCK_FOLDED?!1:e===x.BLOCK_LITERAL?!0:!Tn(n,u,f.length);if(!n)return w?`|
`:`>
`;let p,v;for(v=n.length;v>0;--v){const j=n[v-1];if(j!==`
`&&j!=="	"&&j!==" ")break}let b=n.substring(v);const _=b.indexOf(`
`);_===-1?p="-":n===b||_!==b.length-1?(p="+",i&&i()):p="",b&&(n=n.slice(0,-b.length),b[b.length-1]===`
`&&(b=b.slice(0,-1)),b=b.replace(ut,`$&${f}`));let g=!1,$,C=-1;for($=0;$<n.length;++$){const j=n[$];if(j===" ")g=!0;else if(j===`
`)C=$;else break}let T=n.substring(0,C<$?C+1:$);T&&(n=n.substring(T.length),T=T.replace(/\n+/g,`$&${f}`));let L=(g?f?"2":"1":"")+p;if(l&&(L+=" "+c(l.replace(/ ?[\r\n]+/g," ")),o&&o()),!w){const j=n.replace(/\n+/g,`
$&`).replace(/(?:^|\n)([\t ].*)(?:([\n\t ]*)\n(?![\n\t ]))?/g,"$1$2").replace(/\n+/g,`$&${f}`);let te=!1;const le=Ge(t,!0);r!=="folded"&&e!==x.BLOCK_FOLDED&&(le.onOverflow=()=>{te=!0});const _e=ze(`${T}${j}${b}`,f,rt,le);if(!te)return`>${L}
${f}${_e}`}return n=n.replace(/\n+/g,`$&${f}`),`|${L}
${f}${T}${n}${b}`}function In(l,e,n,t){const{type:o,value:i}=l,{actualString:r,implicitKey:c,indent:u,indentStep:f,inFlow:w}=e;if(c&&i.includes(`
`)||w&&/[[\]{},]/.test(i))return ke(i,e);if(!i||/^[\n\t ,[\]{}#&*!|>'"%@`]|^[?-]$|^[?-][ \t]|[\n:][ \t]|[ \t]\n|[\n\t ]#|[\n\t :]$/.test(i))return c||w||!i.includes(`
`)?ke(i,e):Fe(l,e,n,t);if(!c&&!w&&o!==x.PLAIN&&i.includes(`
`))return Fe(l,e,n,t);if(Ye(i)){if(u==="")return e.forceBlockIndent=!0,Fe(l,e,n,t);if(c&&u===f)return ke(i,e)}const p=i.replace(/\n+/g,`$&
${u}`);if(r){const v=g=>g.default&&g.tag!=="tag:yaml.org,2002:str"&&g.test?.test(p),{compat:b,tags:_}=e.doc.schema;if(_.some(v)||b?.some(v))return ke(i,e)}return c?p:ze(p,u,qt,Ge(e,!1))}function Mn(l,e,n,t){const{implicitKey:o,inFlow:i}=e,r=typeof l.value=="string"?l:Object.assign({},l,{value:String(l.value)});let{type:c}=l;c!==x.QUOTE_DOUBLE&&/[\x00-\x08\x0b-\x1f\x7f-\x9f\u{D800}-\u{DFFF}]/u.test(r.value)&&(c=x.QUOTE_DOUBLE);const u=w=>{switch(w){case x.BLOCK_FOLDED:case x.BLOCK_LITERAL:return o||i?ke(r.value,e):Fe(r,e,n,t);case x.QUOTE_DOUBLE:return Ee(r.value,e);case x.QUOTE_SINGLE:return st(r.value,e);case x.PLAIN:return In(r,e,n,t);default:return null}};let f=u(c);if(f===null){const{defaultKeyType:w,defaultStringType:p}=e.options,v=o&&w||p;if(f=u(v),f===null)throw new Error(`Unsupported default string type ${v}`)}return f}function Un(l,e){const n=Object.assign({blockQuote:!0,commentString:Cn,defaultKeyType:null,defaultStringType:"PLAIN",directives:null,doubleQuotedAsJSON:!1,doubleQuotedMinMultiLineLength:40,falseStr:"false",flowCollectionPadding:!0,indentSeq:!0,lineWidth:80,minContentWidth:20,nullStr:"null",simpleKeys:!1,singleQuote:null,trueStr:"true",verifyAliasOrder:!0},l.schema.toStringOptions,e);let t;switch(n.collectionStyle){case"block":t=!1;break;case"flow":t=!0;break;default:t=null}return{anchors:new Set,doc:l,flowCollectionPadding:n.flowCollectionPadding?" ":"",indent:"",indentStep:typeof n.indent=="number"?" ".repeat(n.indent):"  ",inFlow:t,options:n}}function Bn(l,e){if(e.tag){const o=l.filter(i=>i.tag===e.tag);if(o.length>0)return o.find(i=>i.format===e.format)??o[0]}let n,t;if(F(e)){t=e.value;let o=l.filter(i=>i.identify?.(t));if(o.length>1){const i=o.filter(r=>r.test);i.length>0&&(o=i)}n=o.find(i=>i.format===e.format)??o.find(i=>!i.format)}else t=e,n=l.find(o=>o.nodeClass&&t instanceof o.nodeClass);if(!n){const o=t?.constructor?.name??typeof t;throw new Error(`Tag not resolved for ${o} value`)}return n}function Ln(l,e,{anchors:n,doc:t}){if(!t.directives)return"";const o=[],i=(F(l)||Y(l))&&l.anchor;i&&Pt(i)&&(n.add(i),o.push(`&${i}`));const r=l.tag?l.tag:e.default?null:e.tag;return r&&o.push(t.directives.tagString(r)),o.join(" ")}function qe(l,e,n,t){if(J(l))return l.toString(e,n,t);if($e(l)){if(e.doc.directives)return l.toString(e);if(e.resolvedAliases?.has(l))throw new TypeError("Cannot stringify circular structure without alias nodes");e.resolvedAliases?e.resolvedAliases.add(l):e.resolvedAliases=new Set([l]),l=l.resolve(e.doc)}let o;const i=W(l)?l:e.doc.createNode(l,{onTagObj:u=>o=u});o||(o=Bn(e.doc.schema.tags,i));const r=Ln(i,o,e);r.length>0&&(e.indentAtStart=(e.indentAtStart??0)+r.length+1);const c=typeof o.stringify=="function"?o.stringify(i,e,n,t):F(i)?Mn(i,e,n,t):i.toString(e,n,t);return r?F(i)||c[0]==="{"||c[0]==="["?`${r} ${c}`:`${r}
${e.indent}${c}`:c}function xn({key:l,value:e},n,t,o){const{allNullValues:i,doc:r,indent:c,indentStep:u,options:{commentString:f,indentSeq:w,simpleKeys:p}}=n;let v=W(l)&&l.comment||null;if(p){if(v)throw new Error("With simple keys, key nodes cannot have comments");if(Y(l)||!W(l)&&typeof l=="object"){const le="With simple keys, collection cannot be used as a key value";throw new Error(le)}}let b=!p&&(!l||v&&e==null&&!n.inFlow||Y(l)||(F(l)?l.type===x.BLOCK_FOLDED||l.type===x.BLOCK_LITERAL:typeof l=="object"));n=Object.assign({},n,{allNullValues:!1,implicitKey:!b&&(p||!i),indent:c+u});let _=!1,g=!1,$=qe(l,n,()=>_=!0,()=>g=!0);if(!b&&!n.inFlow&&$.length>1024){if(p)throw new Error("With simple keys, single line scalar must not span more than 1024 characters");b=!0}if(n.inFlow){if(i||e==null)return _&&t&&t(),$===""?"?":b?`? ${$}`:$}else if(i&&!p||e==null&&b)return $=`? ${$}`,v&&!_?$+=we($,n.indent,f(v)):g&&o&&o(),$;_&&(v=null),b?(v&&($+=we($,n.indent,f(v))),$=`? ${$}
${c}:`):($=`${$}:`,v&&($+=we($,n.indent,f(v))));let C,T,B;W(e)?(C=!!e.spaceBefore,T=e.commentBefore,B=e.comment):(C=!1,T=null,B=null,e&&typeof e=="object"&&(e=r.createNode(e))),n.implicitKey=!1,!b&&!v&&F(e)&&(n.indentAtStart=$.length+1),g=!1,!w&&u.length>=2&&!n.inFlow&&!b&&mt(e)&&!e.flow&&!e.tag&&!e.anchor&&(n.indent=n.indent.substring(2));let L=!1;const j=qe(e,n,()=>L=!0,()=>g=!0);let te=" ";if(v||C||T){if(te=C?`
`:"",T){const le=f(T);te+=`
${Ce(le,n.indent)}`}j===""&&!n.inFlow?te===`
`&&(te=`

`):te+=`
${n.indent}`}else if(!b&&Y(e)){const le=j[0],_e=j.indexOf(`
`),bt=_e!==-1,Qt=n.inFlow??e.flow??e.items.length===0;if(bt||!Qt){let wt=!1;if(bt&&(le==="&"||le==="!")){let ce=j.indexOf(" ");le==="&"&&ce!==-1&&ce<_e&&j[ce+1]==="!"&&(ce=j.indexOf(" ",ce+1)),(ce===-1||_e<ce)&&(wt=!0)}wt||(te=`
${n.indent}`)}}else(j===""||j[0]===`
`)&&(te="");return $+=te+j,n.inFlow?L&&t&&t():B&&!L?$+=we($,n.indent,f(B)):g&&o&&o(),$}function jn(l,e){(l==="debug"||l==="warn")&&console.warn(e)}const Ie="<<",lt={identify:l=>l===Ie||typeof l=="symbol"&&l.description===Ie,default:"key",tag:"tag:yaml.org,2002:merge",test:/^<<$/,resolve:()=>Object.assign(new x(Symbol(Ie)),{addToJSMap:Jt}),stringify:()=>Ie},Dn=(l,e)=>(lt.identify(e)||F(e)&&(!e.type||e.type===x.PLAIN)&&lt.identify(e.value))&&l?.doc.schema.tags.some(n=>n.tag===lt.tag&&n.default);function Jt(l,e,n){if(n=l&&$e(n)?n.resolve(l.doc):n,mt(n))for(const t of n.items)ot(l,e,t);else if(Array.isArray(n))for(const t of n)ot(l,e,t);else ot(l,e,n)}function ot(l,e,n){const t=l&&$e(n)?n.resolve(l.doc):n;if(!Dt(t))throw new Error("Merge sources must be maps or map aliases");const o=t.toJSON(null,l,Map);for(const[i,r]of o)e instanceof Map?e.has(i)||e.set(i,r):e instanceof Set?e.add(i):Object.prototype.hasOwnProperty.call(e,i)||Object.defineProperty(e,i,{value:r,writable:!0,enumerable:!0,configurable:!0});return e}function Ht(l,e,{key:n,value:t}){if(W(n)&&n.addToJSMap)n.addToJSMap(l,e,t);else if(Dn(l,n))Jt(l,e,t);else{const o=ne(n,"",l);if(e instanceof Map)e.set(o,ne(t,o,l));else if(e instanceof Set)e.add(o);else{const i=Pn(n,o,l),r=ne(t,i,l);i in e?Object.defineProperty(e,i,{value:r,writable:!0,enumerable:!0,configurable:!0}):e[i]=r}}return e}function Pn(l,e,n){if(e===null)return"";if(typeof e!="object")return String(e);if(W(l)&&n?.doc){const t=Un(n.doc,{});t.anchors=new Set;for(const i of n.anchors.keys())t.anchors.add(i.anchor);t.inFlow=!0,t.inStringifyKey=!0;const o=l.toString(t);if(!n.mapKeyWarned){let i=JSON.stringify(o);i.length>40&&(i=i.substring(0,36)+'..."'),jn(n.doc.options.logLevel,`Keys with collection values will be stringified due to JS Object restrictions: ${i}. Set mapAsMap: true to use object keys.`),n.mapKeyWarned=!0}return o}return JSON.stringify(e)}function gt(l,e,n){const t=Re(l,void 0,n),o=Re(e,void 0,n);return new re(t,o)}class re{constructor(e,n=null){Object.defineProperty(this,ie,{value:jt}),this.key=e,this.value=n}clone(e){let{key:n,value:t}=this;return W(n)&&(n=n.clone(e)),W(t)&&(t=t.clone(e)),new re(n,t)}toJSON(e,n){const t=n?.mapAsMap?new Map:{};return Ht(n,t,this)}toString(e,n,t){return e?.doc?xn(this,e,n,t):JSON.stringify(this)}}function Kt(l,e,n){return(e.inFlow??l.flow?Rn:Fn)(l,e,n)}function Fn({comment:l,items:e},n,{blockItemPrefix:t,flowChars:o,itemIndent:i,onChompKeep:r,onComment:c}){const{indent:u,options:{commentString:f}}=n,w=Object.assign({},n,{indent:i,type:null});let p=!1;const v=[];for(let _=0;_<e.length;++_){const g=e[_];let $=null;if(W(g))!p&&g.spaceBefore&&v.push(""),Je(n,v,g.commentBefore,p),g.comment&&($=g.comment);else if(J(g)){const T=W(g.key)?g.key:null;T&&(!p&&T.spaceBefore&&v.push(""),Je(n,v,T.commentBefore,p))}p=!1;let C=qe(g,w,()=>$=null,()=>p=!0);$&&(C+=we(C,i,f($))),p&&$&&(p=!1),v.push(t+C)}let b;if(v.length===0)b=o.start+o.end;else{b=v[0];for(let _=1;_<v.length;++_){const g=v[_];b+=g?`
${u}${g}`:`
`}}return l?(b+=`
`+Ce(f(l),u),c&&c()):p&&r&&r(),b}function Rn({items:l},e,{flowChars:n,itemIndent:t}){const{indent:o,indentStep:i,flowCollectionPadding:r,options:{commentString:c}}=e;t+=i;const u=Object.assign({},e,{indent:t,inFlow:!0,type:null});let f=!1,w=0;const p=[];for(let _=0;_<l.length;++_){const g=l[_];let $=null;if(W(g))g.spaceBefore&&p.push(""),Je(e,p,g.commentBefore,!1),g.comment&&($=g.comment);else if(J(g)){const T=W(g.key)?g.key:null;T&&(T.spaceBefore&&p.push(""),Je(e,p,T.commentBefore,!1),T.comment&&(f=!0));const B=W(g.value)?g.value:null;B?(B.comment&&($=B.comment),B.commentBefore&&(f=!0)):g.value==null&&T?.comment&&($=T.comment)}$&&(f=!0);let C=qe(g,u,()=>$=null);_<l.length-1&&(C+=","),$&&(C+=we(C,t,c($))),!f&&(p.length>w||C.includes(`
`))&&(f=!0),p.push(C),w=p.length}const{start:v,end:b}=n;if(p.length===0)return v+b;if(!f){const _=p.reduce((g,$)=>g+$.length+2,2);f=e.options.lineWidth>0&&_>e.options.lineWidth}if(f){let _=v;for(const g of p)_+=g?`
${i}${o}${g}`:`
`;return`${_}
${o}${b}`}else return`${v}${r}${p.join(" ")}${r}${b}`}function Je({indent:l,options:{commentString:e}},n,t,o){if(t&&o&&(t=t.replace(/^\n+/,"")),t){const i=Ce(e(t),l);n.push(i.trimStart())}}function ve(l,e){const n=F(e)?e.value:e;for(const t of l)if(J(t)&&(t.key===e||t.key===n||F(t.key)&&t.key.value===n))return t}class he extends Rt{static get tagName(){return"tag:yaml.org,2002:map"}constructor(e){super(ge,e),this.items=[]}static from(e,n,t){const{keepUndefined:o,replacer:i}=t,r=new this(e),c=(u,f)=>{if(typeof i=="function")f=i.call(n,u,f);else if(Array.isArray(i)&&!i.includes(u))return;(f!==void 0||o)&&r.items.push(gt(u,f,t))};if(n instanceof Map)for(const[u,f]of n)c(u,f);else if(n&&typeof n=="object")for(const u of Object.keys(n))c(u,n[u]);return typeof e.sortMapEntries=="function"&&r.items.sort(e.sortMapEntries),r}add(e,n){let t;J(e)?t=e:!e||typeof e!="object"||!("key"in e)?t=new re(e,e?.value):t=new re(e.key,e.value);const o=ve(this.items,t.key),i=this.schema?.sortMapEntries;if(o){if(!n)throw new Error(`Key ${t.key} already set`);F(o.value)&&Ft(t.value)?o.value.value=t.value:o.value=t.value}else if(i){const r=this.items.findIndex(c=>i(t,c)<0);r===-1?this.items.push(t):this.items.splice(r,0,t)}else this.items.push(t)}delete(e){const n=ve(this.items,e);return n?this.items.splice(this.items.indexOf(n),1).length>0:!1}get(e,n){const o=ve(this.items,e)?.value;return(!n&&F(o)?o.value:o)??void 0}has(e){return!!ve(this.items,e)}set(e,n){this.add(new re(e,n),!0)}toJSON(e,n,t){const o=t?new t:n?.mapAsMap?new Map:{};n?.onCreate&&n.onCreate(o);for(const i of this.items)Ht(n,o,i);return o}toString(e,n,t){if(!e)return JSON.stringify(this);for(const o of this.items)if(!J(o))throw new Error(`Map items must all be pairs; found ${JSON.stringify(o)} instead`);return!e.allNullValues&&this.hasAllNullValues(!1)&&(e=Object.assign({},e,{allNullValues:!0})),Kt(this,e,{blockItemPrefix:"",flowChars:{start:"{",end:"}"},itemIndent:e.indent||"",onChompKeep:t,onComment:n})}}class Wt extends Rt{static get tagName(){return"tag:yaml.org,2002:seq"}constructor(e){super(Te,e),this.items=[]}add(e){this.items.push(e)}delete(e){const n=Me(e);return typeof n!="number"?!1:this.items.splice(n,1).length>0}get(e,n){const t=Me(e);if(typeof t!="number")return;const o=this.items[t];return!n&&F(o)?o.value:o}has(e){const n=Me(e);return typeof n=="number"&&n<this.items.length}set(e,n){const t=Me(e);if(typeof t!="number")throw new Error(`Expected a valid index, not ${e}.`);const o=this.items[t];F(o)&&Ft(n)?o.value=n:this.items[t]=n}toJSON(e,n){const t=[];n?.onCreate&&n.onCreate(t);let o=0;for(const i of this.items)t.push(ne(i,String(o++),n));return t}toString(e,n,t){return e?Kt(this,e,{blockItemPrefix:"- ",flowChars:{start:"[",end:"]"},itemIndent:(e.indent||"")+"  ",onChompKeep:t,onComment:n}):JSON.stringify(this)}static from(e,n,t){const{replacer:o}=t,i=new this(e);if(n&&Symbol.iterator in Object(n)){let r=0;for(let c of n){if(typeof o=="function"){const u=n instanceof Set?c:String(r++);c=o.call(n,u,c)}i.items.push(Re(c,void 0,t))}}return i}}function Me(l){let e=F(l)?l.value:l;return e&&typeof e=="string"&&(e=Number(e)),typeof e=="number"&&Number.isInteger(e)&&e>=0?e:null}function qn(l,e,n){const{replacer:t}=n,o=new Wt(l);o.tag="tag:yaml.org,2002:pairs";let i=0;if(e&&Symbol.iterator in Object(e))for(let r of e){typeof t=="function"&&(r=t.call(e,String(i++),r));let c,u;if(Array.isArray(r))if(r.length===2)c=r[0],u=r[1];else throw new TypeError(`Expected [key, value] tuple: ${r}`);else if(r&&r instanceof Object){const f=Object.keys(r);if(f.length===1)c=f[0],u=r[c];else throw new TypeError(`Expected tuple with one key, not ${f.length} keys`)}else c=r;o.items.push(gt(c,u,n))}return o}class yt extends Wt{constructor(){super(),this.add=he.prototype.add.bind(this),this.delete=he.prototype.delete.bind(this),this.get=he.prototype.get.bind(this),this.has=he.prototype.has.bind(this),this.set=he.prototype.set.bind(this),this.tag=yt.tag}toJSON(e,n){if(!n)return super.toJSON(e);const t=new Map;n?.onCreate&&n.onCreate(t);for(const o of this.items){let i,r;if(J(o)?(i=ne(o.key,"",n),r=ne(o.value,i,n)):i=ne(o,"",n),t.has(i))throw new Error("Ordered maps must not include duplicate keys");t.set(i,r)}return t}static from(e,n,t){const o=qn(e,n,t),i=new this;return i.items=o.items,i}}yt.tag="tag:yaml.org,2002:omap";class ht extends he{constructor(e){super(e),this.tag=ht.tag}add(e){let n;J(e)?n=e:e&&typeof e=="object"&&"key"in e&&"value"in e&&e.value===null?n=new re(e.key,null):n=new re(e,null),ve(this.items,n.key)||this.items.push(n)}get(e,n){const t=ve(this.items,e);return!n&&J(t)?F(t.key)?t.key.value:t.key:t}set(e,n){if(typeof n!="boolean")throw new Error(`Expected boolean value for set(key, value) in a YAML set, not ${typeof n}`);const t=ve(this.items,e);t&&!n?this.items.splice(this.items.indexOf(t),1):!t&&n&&this.items.push(new re(e))}toJSON(e,n){return super.toJSON(e,n,Set)}toString(e,n,t){if(!e)return JSON.stringify(this);if(this.hasAllNullValues(!0))return super.toString(Object.assign({},e,{allNullValues:!0}),n,t);throw new Error("Set items must all have null values")}static from(e,n,t){const{replacer:o}=t,i=new this(e);if(n&&Symbol.iterator in Object(n))for(let r of n)typeof o=="function"&&(r=o.call(n,r,r)),i.items.push(gt(r,null,t));return i}}ht.tag="tag:yaml.org,2002:set";new Set("0123456789ABCDEFabcdef");new Set("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-#;/?:@&=+$_.!~*'()");new Set(",[]{}");new Set(` ,[]{}
\r	`);const Ve={variable:{label:"Set Variable",icon:"fluent:braces-variable-24-filled"},target:{label:"Target",icon:"fluent:target-arrow-24-filled"},onFalse:{label:"On False",icon:"emojione:cross-mark"},onTrue:{label:"On True",icon:"emojione:white-heavy-check-mark"},fail:{label:"Fail",icon:""},success:{label:"Success",icon:""},text:{label:"Text",icon:"emojione-monotone:speech-balloon"},damage:{label:"Damage",icon:"emojione:anger-symbol"},condition:{label:"Branch",icon:"f7:arrow-branch"},hit:{label:"Hit",icon:""},miss:{label:"Miss",icon:""},attack:{label:"Attack Roll",icon:"twemoji:crossed-swords"},roll:{label:"Roll",icon:"twemoji:game-die"},spell:{label:"Spell",icon:"twemoji:crystal-ball"},ieffect2:{label:"Initiative Effect",icon:"twemoji:sparkles"},counter:{label:"Use Counter",icon:"twemoji:input-numbers"},remove_ieffect:{label:"Remove Initiative Effect",icon:"material-symbols:delete-forever"},attacks:{label:"Action",icon:""},buttons:{label:"Button",icon:"material-symbols:joystick"},save:{label:"Saving Throw",icon:"fa6-solid:recycle"},temphp:{label:"Temp HP",icon:"twemoji:shield"},check:{label:"Ability Check",icon:"twemoji:man-cartwheeling"}},Jn={target:{type:"target",target:"each",effects:[]},attack:{type:"attack",hit:[],miss:[]},damage:{type:"damage",damage:""},save:{type:"save",stat:"dex",dc:"10",fail:[],success:[]},temphp:{type:"temphp",amount:""},ieffect2:{type:"ieffect2",name:""},roll:{type:"roll",dice:"",name:""},text:{type:"text",text:"",title:""},variable:{type:"variable",name:"",value:""},condition:{type:"condition",condition:"",onTrue:[],onFalse:[]},counter:{type:"counter",counter:"",amount:""},check:{type:"check",ability:["athletics"]},remove_ieffect:{type:"remove_ieffect"},spell:{type:"spell",id:2102}},Hn=["effects","hit","miss","fail","success","onTrue","onFalse"],Kn={class:"v-popper__custom-menu"},Wn=["onClick"],Qn=I({__name:"EffectAdder",props:{context:{},name:{}},setup(l){const e=l,n=z(()=>{const c=[...e.context].reverse();let u=!1,f="root";for(const w of c){if(w==="$target"&&(u=!0),w==="buttons"){f="buttons";break}if(w==="attacks"){f="attacks";break}}return{isTargetContext:u,contextLevel:f}}),t=z(()=>{const{isTargetContext:c,contextLevel:u}=n.value;return!c&&u==="root"?["target","roll","text","variable","condition","counter","spell"]:c&&u==="root"?["attack","save","damage","temphp","ieffect2","roll","text","variable","condition","counter","check"]:!c&&(u==="attacks"||u==="buttons")?["target","remove_ieffect","roll","text","variable","condition","counter","spell"]:c&&(u==="attacks"||u==="buttons")?["attack","save","damage","temphp","ieffect2","remove_ieffect","roll","text","variable","condition","counter","check"]:[]}),o=M("automation"),i=M("currentEffect"),r=c=>{if(!o)return;(!o||!o.value)&&(o.value={_v:2,name:e.name||"New Attack",automation:[]});let u;Array.isArray(o.value)?u=o.value[Number.parseInt(e.context[0])].automation:u=o.value.automation;for(const[f,w]of e.context.entries()){const p=/^\d+$/.test(w);if(w!=="root"&&!w.startsWith("$"))if(p){if(f===0)continue;const v=Number.parseInt(w,10);if(Array.isArray(u)&&v<u.length)u=u[v];else return}else if(typeof u=="object"&&w in u)u=u[w];else return}try{u.push(JSON.parse(JSON.stringify(Jn[c]))),i.value=u[u.length-1]}catch(f){console.error(f)}};return(c,u)=>{const f=ee("Icon"),w=ee("VDropdown"),p=Ke("close-popper");return s(Ve)?(m(),D(w,{key:0,distance:6,"positioning-disabled":s(je).isMobile,placement:"left",container:"#effectAdderContainer"},{popper:y(()=>[a("div",Kn,[u[1]||(u[1]=E(" Choose an Effect to add: ")),(m(!0),k(V,null,K(t.value,v=>(m(),k("div",{key:v},[S((m(),k("button",{class:"btn",onClick:b=>r(v)},[d(f,{icon:s(Ve)[v]?.icon,inline:!0,width:"1em",color:"rgb(128,128,128)"},null,8,["icon"]),E(" "+Z(s(Ve)[v]?.label),1)],8,Wn)),[[p]])]))),128)),a("button",{onClick:u[0]||(u[0]=v=>console.log("aaaa"))}," aaa ")])]),default:y(()=>[u[2]||(u[2]=a("div",{role:"button",class:"container"},[a("span",{class:"icon"},"➕"),a("span",null,"Add Effect")],-1))]),_:1},8,["positioning-disabled"])):O("",!0)}}}),He=U(Qn,[["__scopeId","data-v-c5f8d66d"]]),Ue=I({__name:"NodeHeader",props:{type:{},additionalText:{}},setup(l){const e=l;return(n,t)=>{const o=ee("Icon");return m(),k(V,null,[d(o,{icon:s(Ve)[e.type]?.icon,inline:!0,width:"1em",color:"rgb(128,128,128)"},null,8,["icon"]),E(" "+Z(s(Ve)[e.type]?.label)+Z(n.additionalText?` (${n.additionalText})`:""),1)],64)}}}),zn=["onClick"],Gn=["onClick"],Yn=["onClick"],Zn=I({__name:"TreeNode",props:{data:{},depth:{},parentType:{},context:{}},setup(l){const e=l,n=z(()=>e.data.type),t=M("currentEffect"),o=M("currentContext"),i=q(!1),r=q([]),c=u=>{r.value.includes(u)?r.value=r.value.filter(f=>f!==u):r.value.push(u)};return(u,f)=>{const w=ee("Icon"),p=ee("TreeNode",!0);return m(),k(V,null,[a("p",{style:ae(`margin-left: ${(u.depth+1)*15}px; color: grey;`),onClick:f[1]||(f[1]=v=>{t.value=u.data,o.value=u.context})},[d(Ue,{type:n.value},null,8,["type"]),d(w,{icon:"ooui:edit",inline:"",width:"1em",style:{"margin-left":".75em"}}),["attack","condition","save"].includes(n.value)?(m(),k("span",{key:0,class:"collapse-button",onClick:f[0]||(f[0]=Se(v=>i.value=!i.value,["stop"]))},[d(w,{icon:"ooui:expand",inline:"",width:"1em",rotate:i.value?"270deg":""},null,8,["rotate"])])):O("",!0)],4),S(a("div",null,[(m(!0),k(V,null,K(u.data,(v,b)=>(m(),k(V,{key:v},[s(Hn).includes(b)&&n.value!=="ieffect2"?(m(),k(V,{key:0},[["root","effects"].includes(b)?O("",!0):(m(),k("p",{key:b,style:ae(`margin-left: ${(u.depth+2)*15}px; color: white;`)},[d(Ue,{type:b},null,8,["type"]),["onTrue","onFalse","hit","miss","fail","success"].includes(b)?(m(),k("span",{key:0,class:"collapse-button",onClick:Se(_=>c(b),["stop"])},[d(w,{icon:"ooui:expand",inline:"",width:"1em",rotate:r.value.includes(b)?"270deg":""},null,8,["rotate"])],8,zn)):O("",!0)],4)),r.value.includes(b)?O("",!0):(m(),k(V,{key:1},[(m(!0),k(V,null,K(v,(_,g)=>(m(),D(p,{key:g,data:_,depth:u.depth+(["root","effects"].includes(b)?1:2),"parent-type":b,context:[...u.context,`$${n.value}`,b,g.toString()]},null,8,["data","depth","parent-type","context"]))),128)),a("p",{style:ae(`margin-left: ${(u.depth+(["root","effects"].includes(b)?1:2))*15}px;`)},[d(He,{context:[...u.context,b]},null,8,["context"])],4)],64))],64)):O("",!0),b==="buttons"?(m(!0),k(V,{key:1},K(v,(_,g)=>(m(),k(V,{key:g},[a("p",{style:ae(`margin-left: ${(u.depth+1)*15}px;`),onClick:$=>{t.value=_,o.value=[...u.context,"buttons",g.toString()]}},[d(Ue,{type:b,"additional-text":_.label},null,8,["type","additional-text"])],12,Gn),d(dt,{data:_,depth:u.depth+1,"root-type":"button",context:[...u.context,g.toString(),b]},null,8,["data","depth","context"])],64))),128)):O("",!0),b==="attacks"?(m(!0),k(V,{key:2},K(v,(_,g)=>(m(),k(V,{key:g},[a("p",{style:ae(`margin-left: ${(u.depth+1)*15}px;`),onClick:$=>{t.value=_,o.value=[...u.context,"attacks",g.toString()]}},[d(Ue,{type:b,"additional-text":_.attack.name},null,8,["type","additional-text"])],12,Yn),d(dt,{data:_,depth:u.depth+1,"root-type":"attack",context:[...u.context,g.toString(),b]},null,8,["data","depth","context"])],64))),128)):O("",!0)],64))),128))],512),[[zt,!i.value]])],64)}}}),Nt=U(Zn,[["__scopeId","data-v-361bb7c5"]]),Xn=["onClick"],el=I({__name:"TreeRoot",props:{data:{},depth:{default:0},parentType:{default:"root"},rootType:{default:"root"},context:{default:()=>["root"]}},setup(l){const e=M("automation"),n=()=>{if(Array.isArray(l.data)||!e||l.rootType!=="root")return;const r=l.data;e.value=[r,{_v:2,name:"New Attack",automation:[]}]},t=()=>{!e||!e.value||!Array.isArray(e.value)||e.value.push({_v:2,name:"New Attack",automation:[]})},o=M("currentEffect"),i=M("currentContext");return(r,c)=>(m(),k("section",{class:oe({container:r.rootType==="root"})},[Array.isArray(r.data)?(m(),k(V,{key:0},[(m(!0),k(V,null,K(r.data,(u,f)=>(m(),k(V,{key:f},[r.rootType==="root"?(m(),k("p",{key:0,onClick:w=>{o.value=r.data[f],i.value=[...r.context]}}," -"+Z(u.name)+"- ",9,Xn)):O("",!0),(m(!0),k(V,null,K(u.automation??[],(w,p)=>(m(),k("div",{key:w.type},[d(Nt,{data:w,depth:r.depth,"parent-type":r.parentType,context:[...r.context,p.toString()]},null,8,["data","depth","parent-type","context"])]))),128)),a("p",{style:ae(`background-color: var(--color-surface-0); margin-left: ${(r.depth+1)*15}px`)},[d(He,{context:[f.toString(),...r.context]},null,8,["context"])],4)],64))),128)),r.rootType==="root"?(m(),k("p",{key:0,style:ae(`background-color: var(--color-surface-0); margin-left: ${(r.depth+1)*15}px`),class:"add",onClick:c[0]||(c[0]=u=>t())}," Add Attack to this feature ",4)):O("",!0)],64)):(m(),k(V,{key:1},[r.rootType==="root"?(m(),k("p",{key:0,onClick:c[1]||(c[1]=u=>{o.value=r.data,i.value=[...r.context]})}," -Attack Root- ")):O("",!0),(m(!0),k(V,null,K(r.data.automation??[],(u,f)=>(m(),k("div",{key:u.type},[d(Nt,{data:u,depth:r.depth,"parent-type":r.parentType,context:[...r.context,f.toString()]},null,8,["data","depth","parent-type","context"])]))),128)),a("p",{style:ae(`background-color: var(--color-surface-0); margin-left: ${(r.depth+1)*15}px`)},[d(He,{context:r.context},null,8,["context"])],4),r.rootType==="root"?(m(),k("p",{key:1,style:ae(`background-color: var(--color-surface-0); margin-left: ${(r.depth+1)*15}px`),class:"add",onClick:c[2]||(c[2]=u=>n())}," Add Attack to this feature ",4)):O("",!0)],64))],2))}}),dt=U(el,[["__scopeId","data-v-9f505c81"]]),tl={class:"section-header"},nl=I({__name:"SectionHeader",props:{title:{}},setup(l){return(e,n)=>(m(),k("div",tl,[n[0]||(n[0]=a("hr",{class:"left"},null,-1)),n[1]||(n[1]=E()),a("span",null,Z(e.title),1),n[2]||(n[2]=E()),n[3]||(n[3]=a("hr",null,null,-1))]))}}),N=U(nl,[["__scopeId","data-v-a457c527"]]),ll={};function ol(l,e){const n=Ke("tooltip");return S((m(),k("div",{onClick:e[0]||(e[0]=Se(()=>{},["stop"]))},e[1]||(e[1]=[a("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 256 256"},[a("path",{fill:"#888888",d:"M54.8 119.49a35 35 0 0 1-5.75 8.51a35 35 0 0 1 5.75 8.51C60 147.24 60 159.83 60 172c0 25.94 1.84 32 20 32a12 12 0 0 1 0 24c-19.14 0-32.2-6.9-38.8-20.51C36 196.76 36 184.17 36 172c0-25.94-1.84-32-20-32a12 12 0 0 1 0-24c18.16 0 20-6.06 20-32c0-12.17 0-24.76 5.2-35.49C47.8 34.9 60.86 28 80 28a12 12 0 0 1 0 24c-18.16 0-20 6.06-20 32c0 12.17 0 24.76-5.2 35.49M240 116c-18.16 0-20-6.06-20-32c0-12.17 0-24.76-5.2-35.49C208.2 34.9 195.14 28 176 28a12 12 0 0 0 0 24c18.16 0 20 6.06 20 32c0 12.17 0 24.76 5.2 35.49A35 35 0 0 0 207 128a35 35 0 0 0-5.75 8.51C196 147.24 196 159.83 196 172c0 25.94-1.84 32-20 32a12 12 0 0 0 0 24c19.14 0 32.2-6.9 38.8-20.51c5.2-10.73 5.2-23.32 5.2-35.49c0-25.94 1.84-32 20-32a12 12 0 0 0 0-24"})],-1)]))),[[n,{content:"<b>AnnotatedExpression</b><br> - Variables and functions allowed<br> - Braces {} required",html:!0},void 0,{bottom:!0}]])}const ye=U(ll,[["render",ol],["__scopeId","data-v-a15976ea"]]),G=(l,e,n)=>{if(l){for(const t of e)P(()=>l.value[t],()=>{l.value[t]||delete l.value[t]});if(n)for(const t of Object.keys(n)){const o=n[t];if(o)for(const i of o)P(()=>l.value[t][i],()=>{(!l.value[t][i]||l.value[t][i]==="0")&&delete l.value[t][i]})}}},il={key:0},al={class:"docs-container"},rl={key:0,class:"docs"},sl=["href"],ul={key:0},dl={class:"highlight"},fl={key:1},cl={class:"highlight"},pl=I({__name:"AutomationDocumentation",props:{nodeType:{}},setup(l){const e=q({});fe(async()=>{const{success:t,data:o}=await de("/api/automationDocumentation");t&&(e.value=o)});const n=z(()=>l.nodeType&&e.value[l.nodeType]||null);return(t,o)=>t.nodeType&&n.value?(m(),k("div",il,[a("details",null,[o[10]||(o[10]=a("summary",null," Show documentation",-1)),a("div",al,[n.value?(m(),k("div",rl,[d(et,{class:"small",text:n.value.desc},null,8,["text"]),a("div",null,[o[0]||(o[0]=a("hr",null,null,-1)),o[1]||(o[1]=a("h4",null,"Overview",-1)),o[2]||(o[2]=E(" See full documentation ")),a("a",{href:`https://avrae.readthedocs.io/en/stable/automation_ref.html#${n.value.url}`,target:"_blank"},"here",8,sl),o[3]||(o[3]=E(". ")),n.value?.ts?(m(),D(s(hn),{key:0,value:`// Values denoted with an ? are optional.
${n.value.ts}`,theme:"vs-dark",options:{wordWrap:"on",theme:"vs-dark",minimap:{enabled:!1},automaticLayout:!0,readOnly:!0,scrollBeyondLastLine:!1},language:"typescript",height:"200px"},null,8,["value"])):O("",!0)]),n.value?.opt?(m(),k("div",ul,[o[4]||(o[4]=a("hr",null,null,-1)),o[5]||(o[5]=a("h4",null,"Options",-1)),a("ul",null,[(m(!0),k(V,null,K(n.value.opt,(i,r)=>(m(),k("li",{key:r},[a("span",dl,Z(r),1),d(et,{text:i},null,8,["text"])]))),128))])])):O("",!0),n.value?.variables?(m(),k("div",fl,[o[8]||(o[8]=a("hr",null,null,-1)),o[9]||(o[9]=a("h4",null,"Exposed Variables",-1)),a("ul",null,[(m(!0),k(V,null,K(n.value.variables,(i,r)=>(m(),k("li",{key:r},[a("span",cl,Z(r),1),o[6]||(o[6]=E(" [")),a("code",null,Z(i.type),1),o[7]||(o[7]=E("] ")),d(et,{text:i.desc},null,8,["text"])]))),128))])])):O("",!0)])):O("",!0)])])])):O("",!0)}}),ml=U(pl,[["__scopeId","data-v-5cedb775"]]),vl={class:"two-wide"},gl={key:0,class:"input-wrapper"},yl=I({__name:"NodeText",setup(l){const e=M("currentEffect"),n=q([]);fe(async()=>{const{success:o,data:i}=await de("/api/gamedata/limiteduse");o&&(n.value=i)});const t=q(typeof e.value.text=="string");return P(()=>t.value,()=>{t.value?e.value.text="":e.value.text={id:192,typeId:12168134}}),G(e,["title"]),(o,i)=>{const r=ee("v-select");return s(e)?(m(),k(V,{key:0},[d(N,{title:"Text"}),a("div",vl,[d(h,{title:"Title",for:"title"},{default:y(()=>[S(a("input",{id:"title","onUpdate:modelValue":i[0]||(i[0]=c=>s(e).title=c),type:"text",placeholder:"Effect"},null,512),[[A,s(e).title]])]),_:1})]),d(h,{title:"Description",for:"text",style:{"margin-top":"1rem"}},{default:y(()=>[t.value?(m(),k("div",gl,[S(a("textarea",{id:"text","onUpdate:modelValue":i[1]||(i[1]=c=>s(e).text=c),rows:"20",placeholder:"Description"},null,512),[[A,s(e).text]]),d(ye)])):(m(),D(r,{key:1,modelValue:s(e).text,"onUpdate:modelValue":i[2]||(i[2]=c=>s(e).text=c),options:n.value,label:"name","input-id":"text",reduce:c=>({id:c.id,typeId:c.typeId})},null,8,["modelValue","options","reduce"]))]),_:1}),d(h,{title:"Text Type",for:"textType",style:{"margin-top":"1rem"}},{default:y(()=>[S(a("select",{id:"textType","onUpdate:modelValue":i[3]||(i[3]=c=>t.value=c),class:"ghost"},i[4]||(i[4]=[a("option",{value:!0}," Text ",-1),a("option",{value:!1}," Ability Reference ",-1)]),512),[[Q,t.value]])]),_:1})],64)):O("",!0)}}}),hl=U(yl,[["__scopeId","data-v-83ee22d1"]]),bl={};function wl(l,e){const n=Ke("tooltip");return S((m(),k("div",{onClick:e[0]||(e[0]=Se(()=>{},["stop"]))},e[1]||(e[1]=[a("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24"},[a("path",{fill:"currentColor",d:"M5.5 8H6v.5a1 1 0 0 0 2 0V8h.5a1 1 0 0 0 0-2H8v-.5a1 1 0 0 0-2 0V6h-.5a1 1 0 0 0 0 2m-.62 11.12a1 1 0 0 0 1.41 0l.71-.71l.71.71a1 1 0 0 0 1.41 0a1 1 0 0 0 0-1.41L8.41 17l.71-.71a1 1 0 0 0-1.41-1.41l-.71.71l-.71-.71a1 1 0 0 0-1.41 1.41l.71.71l-.71.71a1 1 0 0 0 0 1.41M20 1H4a3 3 0 0 0-3 3v16a3 3 0 0 0 3 3h16a3 3 0 0 0 3-3V4a3 3 0 0 0-3-3m-9 20H4a1 1 0 0 1-1-1v-7h8Zm0-10H3V4a1 1 0 0 1 1-1h7Zm10 9a1 1 0 0 1-1 1h-7v-8h8Zm0-9h-8V3h7a1 1 0 0 1 1 1Zm-5.5 5.5h3a1 1 0 0 0 0-2h-3a1 1 0 0 0 0 2m3-10.5h-3a1 1 0 0 0 0 2h3a1 1 0 0 0 0-2m-3 13.5h3a1 1 0 0 0 0-2h-3a1 1 0 0 0 0 2"})],-1)]))),[[n,{content:"<b>IntExpression</b><br> - Variables and functions allowed<br> - No braces {} required<br>- Must evaluate to a number/boolean<br>- Dice are not allowed",html:!0},void 0,{bottom:!0}]])}const R=U(bl,[["render",wl],["__scopeId","data-v-66e96c8c"]]),kl={class:"input-wrapper"},Sl=["onUpdate:modelValue"],$l=I({__name:"HigherLevels",props:Ut({isIntExpression:{type:Boolean,default:!1}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(l){const e=Bt(l,"modelValue");return(n,t)=>(m(),k("div",null,[t[2]||(t[2]=a("label",null,"For use with the -l argument.",-1)),a("details",null,[t[1]||(t[1]=a("summary",null," Expand ",-1)),a("ol",null,[(m(),k(V,null,K(9,o=>a("li",{key:o},[a("div",kl,[S(a("input",{"onUpdate:modelValue":i=>e.value[o]=i,type:"text"},null,8,Sl),[[A,e.value[o]]]),t[0]||(t[0]=E()),n.isIntExpression?(m(),D(R,{key:0})):O("",!0)])])),64))])])]))}}),Ze=U($l,[["__scopeId","data-v-7a13a725"]]),_l={class:"two-wide"},Ol={class:"input-wrapper"},Al={class:"two-wide"},El={class:"input-wrapper"},Vl=I({__name:"NodeVariable",setup(l){const e=M("currentEffect");return M("currentContext"),P(()=>e.value?.higher,()=>{for(const n in e.value.higher){const t=Number.parseInt(n);e.value.higher[t]===""&&delete e.value.higher[t]}},{deep:!0}),We(()=>{Object.values(e.value.higher||{}).some(n=>n!=="")||delete e.value.higher}),Object.hasOwn(e.value,"higher")||(e.value.higher={}),G(e,["onError"]),(n,t)=>s(e)?(m(),k(V,{key:0},[d(N,{title:"Set Variable"}),a("div",_l,[d(h,{title:"Name*",for:"name"},{default:y(()=>[S(a("input",{id:"name","onUpdate:modelValue":t[0]||(t[0]=o=>s(e).name=o),type:"text",class:oe({required:s(e).name.length===0})},null,2),[[A,s(e).name]])]),_:1})]),d(h,{title:"Value*",for:"value"},{default:y(()=>[a("div",Ol,[S(a("input",{id:"value","onUpdate:modelValue":t[1]||(t[1]=o=>s(e).value=o),type:"text",class:oe({required:s(e).value.length===0})},null,2),[[A,s(e).value]]),t[4]||(t[4]=E()),d(R)])]),_:1}),d(N,{title:"Additional Options"}),a("div",Al,[d(h,{title:"On Error",for:"error"},{default:y(()=>[a("div",El,[S(a("input",{id:"error","onUpdate:modelValue":t[2]||(t[2]=o=>s(e).onError=o),type:"text"},null,512),[[A,s(e).onError]]),t[5]||(t[5]=E()),d(R)])]),_:1}),d(h,{title:"At higher levels",for:"higherLevels"},{default:y(()=>[d(Ze,{modelValue:s(e).higher,"onUpdate:modelValue":t[3]||(t[3]=o=>s(e).higher=o),"is-int-expression":""},null,8,["modelValue"])]),_:1})])],64)):O("",!0)}}),Nl=U(Vl,[["__scopeId","data-v-bf1eebb0"]]),pe=Number.isNaN,Cl=I({components:{LabelledComponent:h},props:{isClearable:{type:Boolean,required:!1,default:!1},min:{type:Number,default:0},max:{type:Number,default:Number.POSITIVE_INFINITY},step:{type:Number,required:!1,default:5},title:{type:String,required:!0},modelValue:{type:Number,default:Number.NaN},labelId:{type:String,required:!1,default:""}},emits:["update:modelValue"],data(){return{value:Number.NaN}},computed:{increasable(){return this.value==null?!0:pe(this.value)||this.value<this.max},decreasable(){return this.value==null?!0:pe(this.value)||this.value>this.min},placeholder(){return this.isClearable?"Override":""}},watch:{modelValue:{immediate:!0,handler(l,e){!(pe(l)&&typeof e>"u")&&l!==this.value&&this.setValue(l)}}},methods:{isNaN:pe,change(l){this.setValue(l?.target.value)},decrease(){if(this.decreasable){let{value:l}=this;if(l==null){this.setValue(0);return}pe(l)&&(l=0),this.setValue(l-this.step)}},increase(){if(this.increasable){let{value:l}=this;if(l==null){this.setValue(0);return}pe(l)&&(l=0),this.setValue(l+this.step)}},setValue(l){if(l==null){const t=this.value,o=null;this.value=o,this.$emit("update:modelValue",o,t);return}const e=this.value;let n=typeof l!="number"?Number.parseFloat(l):l;pe(n)||this.min<=this.max&&(n=Math.min(this.max,Math.max(this.min,n))),this.value=n,n===e&&(this.$refs.input.value=String(n)),this.$emit("update:modelValue",n,e)},clear(){this.setValue(null)}}}),Tl={class:"quantity"},Il=["id","value","name","min","max","step"],Ml={class:"quantity-nav"},Ul=["aria-label"],Bl=["aria-label"],Ll=["aria-label"];function xl(l,e,n,t,o,i){const r=ee("font-awesome-icon"),c=ee("LabelledComponent");return m(),D(c,{title:l.title,for:l.labelId},{default:y(()=>[Gt(l.$slots,"default",{},void 0,!0),a("div",Tl,[a("input",{id:l.labelId,ref:"input",value:isNaN(l.value)?"":l.value,type:"number",name:l.title,min:l.min,max:l.max,step:l.step,inputmode:"numeric",onChange:e[0]||(e[0]=(...u)=>l.change&&l.change(...u))},null,40,Il),a("div",Ml,[a("div",{class:"quantity-button quantity-up","aria-label":`Increase ${l.title} by ${l.step}`,onClick:e[1]||(e[1]=Se((...u)=>l.increase&&l.increase(...u),["prevent"]))}," + ",8,Ul),a("div",{class:"quantity-button quantity-down","aria-label":`Decrease ${l.title} by ${l.step}`,onClick:e[2]||(e[2]=Se((...u)=>l.decrease&&l.decrease(...u),["prevent"]))}," - ",8,Bl)]),l.isClearable?(m(),k("span",{key:0,class:"delete-button","aria-label":`Clear override of ${l.title}`,onClick:e[3]||(e[3]=(...u)=>l.clear&&l.clear(...u))},[d(r,{icon:["fas","trash"]})],8,Ll)):O("",!0)])]),_:3},8,["title","for"])}const jl=U(Cl,[["render",xl],["__scopeId","data-v-26ef504d"]]),Dl={class:"two-wide"},Pl={key:0,value:"all"},Fl=["value"],Rl={key:2,value:"parent"},ql={key:3,value:"children"},Jl={class:"two-wide"},Hl=I({__name:"NodeTarget",setup(l){const e=M("currentEffect"),n=M("currentContext");Object.hasOwn(e.value,"sortBy")||(e.value.sortBy="user_input"),P(()=>e.value?.sortBy,()=>{e.value?.sortBy==="user_input"&&delete e.value.sortBy});const t=z(()=>n.value.includes("buttons")),o=z(()=>n.value.includes("attacks"));P(()=>e.value?.target,()=>{e.value?.target||(e.value.target=1)});const i=z(()=>t.value&&o.value&&n.value.indexOf("attacks")>n.value.indexOf("buttons")?!0:!t.value);return e?.value.target==="each"&&(e.value.target="all"),(r,c)=>s(e)?(m(),k(V,{key:0},[d(N,{title:"Target"}),a("div",Dl,[d(h,{title:"Target",for:"target"},{default:y(()=>[S(a("select",{id:"target","onUpdate:modelValue":c[0]||(c[0]=u=>s(e).target=u),title:"Target",class:"ghost"},[i.value?(m(),k("option",Pl," All ")):O("",!0),c[3]||(c[3]=a("option",{value:"self"}," Caster ",-1)),t.value?O("",!0):(m(),k("option",{key:1,value:Number(s(e).target)?s(e).target:1}," Position ",8,Fl)),o.value?(m(),k("option",Rl," Parent ")):O("",!0),o.value?(m(),k("option",ql," Children ")):O("",!0)],512),[[Q,s(e).target]])]),_:1}),Number(s(e).target)?(m(),D(jl,{key:0,modelValue:s(e).target,"onUpdate:modelValue":c[1]||(c[1]=u=>s(e).target=u),title:"Target Position",min:1,step:1,"is-clearable":!1},null,8,["modelValue"])):O("",!0)]),d(N,{title:"Additional Options"}),a("div",Jl,[d(h,{title:"Sort Targets By",for:"sortTargetsBy"},{default:y(()=>[S(a("select",{id:"sortTargetBy","onUpdate:modelValue":c[2]||(c[2]=u=>s(e).sortBy=u),placeholder:"User Input",title:"User input",class:"ghost"},c[4]||(c[4]=[a("option",{value:"user_input"}," User Input ",-1),a("option",{value:"hp_asc"}," HP Ascending ",-1),a("option",{value:"hp_desc"}," HP Desc ",-1)]),512),[[Q,s(e).sortBy]])]),_:1})])],64)):O("",!0)}}),Kl=U(Hl,[["__scopeId","data-v-ab0668f1"]]),Wl={class:"two-wide"},Ql=I({__name:"NodeRemoveIEffect",setup(l){const e=M("currentEffect");return G(e,["removeParent"]),(n,t)=>s(e)?(m(),k(V,{key:0},[d(N,{title:"Remove IEffect"}),t[2]||(t[2]=a("span",null,"Remove IEffect only has optional options.",-1)),d(N,{title:"Additional Options"}),a("div",Wl,[d(h,{title:"Remove Parent",for:"removeParent"},{default:y(()=>[S(a("select",{id:"removeParent","onUpdate:modelValue":t[0]||(t[0]=o=>s(e).removeParent=o),class:"ghost"},t[1]||(t[1]=[a("option",{value:null}," Never ",-1),a("option",{value:"always"}," Always ",-1),a("option",{value:"if_no_children"}," If No Children ",-1)]),512),[[Q,s(e).removeParent]])]),_:1})])],64)):O("",!0)}}),zl=U(Ql,[["__scopeId","data-v-abd25841"]]),Gl={class:"two-wide"},Yl=["value"],Zl={class:"two-wide"},Xl=I({__name:"NodeSave",setup(l){const e=M("currentEffect");return Object.hasOwn(e.value,"adv")||(e.value.adv=0),P(()=>e.value?.adv,()=>{e.value?.adv===0&&delete e.value.adv}),G(e,["dc"]),(n,t)=>s(e)?(m(),k(V,{key:0},[d(N,{title:"Saving Throw"}),a("div",Gl,[d(h,{title:"Save Stat",for:"saveStat"},{default:y(()=>[S(a("select",{id:"saveStat","onUpdate:modelValue":t[0]||(t[0]=o=>s(e).stat=o),title:"Saving throw stat",class:"ghost"},[(m(!0),k(V,null,K(s(en),(o,i)=>(m(),k("option",{key:i,value:i},Z(o),9,Yl))),128))],512),[[Q,s(e).stat]])]),_:1})]),d(N,{title:"Additional Options"}),d(h,{title:"DC",for:"dc"},{default:y(()=>[S(a("input",{id:"dc","onUpdate:modelValue":t[1]||(t[1]=o=>s(e).dc=o),type:"text",placeholder:"DC (Optional)"},null,512),[[A,s(e).dc]])]),_:1}),a("div",Zl,[d(h,{title:"Advantage",for:"advantage"},{default:y(()=>[S(a("select",{id:"sortTargetBy","onUpdate:modelValue":t[2]||(t[2]=o=>s(e).adv=o),placeholder:"Advantage (optional)",title:"Advantage",class:"ghost"},t[3]||(t[3]=[a("option",{value:0}," Flat ",-1),a("option",{value:1}," Advantage ",-1),a("option",{value:-1}," Disadvantage ",-1)]),512),[[Q,s(e).adv]])]),_:1})])],64)):O("",!0)}}),eo=U(Xl,[["__scopeId","data-v-fc5f75c3"]]),to={class:"input-wrapper"},no={class:"two-wide"},lo={key:0,value:"custom"},oo=["value"],io={class:"input-wrapper"},ao=I({__name:"NodeAttack",setup(l){const e=M("currentEffect");M("currentContext"),P(()=>e?.value?.attackBonus,()=>{e?.value?.attackBonus===""&&delete e?.value.attackBonus}),e.value&&!Object.hasOwn(e.value,"adv")&&(e.value.adv="0"),It(()=>{e?.value?.adv==="0"&&delete e?.value.adv});const n=q(!1),t=()=>{e?.value.adv==="custom"?(n.value=!0,e.value.adv=""):n.value=!1};return G(e,["attackBonus"]),(o,i)=>s(e)?(m(),k(V,{key:0},[d(N,{title:"Attack"}),d(h,{title:"Attack Bonus",for:"attackBonus"},{default:y(()=>[a("div",to,[S(a("input",{id:"attackBonus","onUpdate:modelValue":i[0]||(i[0]=r=>s(e).attackBonus=r),type:"text"},null,512),[[A,s(e).attackBonus]]),i[3]||(i[3]=E()),d(R)])]),_:1}),d(N,{title:"Additional Options"}),a("div",no,[d(h,{title:"Advantage (optional)",for:"advantage"},{default:y(()=>[S(a("select",{id:"advantage","onUpdate:modelValue":i[1]||(i[1]=r=>s(e).adv=r),title:"Advantage",class:"ghost",onChange:t},[i[4]||(i[4]=a("option",{value:"0"}," Flat ",-1)),i[5]||(i[5]=a("option",{value:"1"}," Advantage ",-1)),i[6]||(i[6]=a("option",{value:"2"}," Elven Advantage ",-1)),i[7]||(i[7]=a("option",{value:"-1"}," Disadvantage ",-1)),n.value?(m(),k("option",{key:1,value:s(e).adv}," Custom ",8,oo)):(m(),k("option",lo," Custom "))],544),[[Q,s(e).adv]])]),_:1}),n.value?(m(),D(h,{key:0,title:"Custom Advantage",for:"customAdvantage"},{default:y(()=>[a("div",io,[S(a("input",{id:"customAdvantage","onUpdate:modelValue":i[2]||(i[2]=r=>s(e).adv=r),type:"text"},null,512),[[A,s(e).adv]]),i[8]||(i[8]=E()),d(R)])]),_:1})):O("",!0)])],64)):O("",!0)}}),ro=U(ao,[["__scopeId","data-v-5a100e06"]]),so={class:"input-wrapper"},uo={class:"two-wide"},fo=I({__name:"NodeDamage",setup(l){const e=M("currentEffect");return P(()=>e?.value.higher,()=>{for(const n in e?.value.higher){const t=Number.parseInt(n);e?.value.higher[t]===""&&delete e?.value.higher[t]}},{deep:!0}),We(()=>{Object.values(e?.value.higher||{}).some(n=>n!=="")||delete e?.value.higher}),Object.hasOwn(e.value,"higher")||(e.value.higher={}),G(e,["overheal","cantripScale","fixedValue"]),(n,t)=>s(e)?(m(),k(V,{key:0},[d(N,{title:"Damage"}),d(h,{title:"Damage",for:"damage"},{default:y(()=>[a("div",so,[S(a("textarea",{id:"damage","onUpdate:modelValue":t[0]||(t[0]=o=>s(e).damage=o),type:"text"},null,512),[[A,s(e).damage]]),d(ye)])]),_:1}),d(N,{title:"Additional Options"}),a("div",uo,[d(h,{title:"Allow Overheal",for:"overheal"},{default:y(()=>[a("span",null,[S(a("input",{id:"overheal","onUpdate:modelValue":t[1]||(t[1]=o=>s(e).overheal=o),type:"checkbox"},null,512),[[H,s(e).overheal]]),t[5]||(t[5]=E()),t[6]||(t[6]=a("label",{for:"overheal"},"Whether this damage should allow a target to exceed its hit point maximum.",-1))])]),_:1}),d(h,{title:"Scales like Cantrip",for:"cantripScale"},{default:y(()=>[a("span",null,[S(a("input",{id:"cantripScale","onUpdate:modelValue":t[2]||(t[2]=o=>s(e).cantripScale=o),type:"checkbox"},null,512),[[H,s(e).cantripScale]]),t[7]||(t[7]=E()),t[8]||(t[8]=a("label",{for:"cantripScale"}," Whether this roll should scale like a cantrip. ",-1))])]),_:1}),d(h,{title:"Fixed value",for:"fixedValue"},{default:y(()=>[a("span",null,[S(a("input",{id:"fixedValue","onUpdate:modelValue":t[3]||(t[3]=o=>s(e).fixedValue=o),type:"checkbox"},null,512),[[H,s(e).fixedValue]]),t[9]||(t[9]=E()),t[10]||(t[10]=a("label",{for:"fixedValue"},[E(" Whether this roll should ignore the "),a("span",{style:{display:"inline-block"}},"-d"),E(" argument and damage bonus effects.")],-1))])]),_:1}),d(h,{title:"At higher levels",for:"higherLevels"},{default:y(()=>[d(Ze,{modelValue:s(e).higher,"onUpdate:modelValue":t[4]||(t[4]=o=>s(e).higher=o)},null,8,["modelValue"])]),_:1})])],64)):O("",!0)}}),co=U(fo,[["__scopeId","data-v-83756c5d"]]),po={class:"input-wrapper"},mo={key:0,class:"delay",style:{color:"var(--color-warning)","font-size":"small"}},vo={class:"two-wide"},go=I({__name:"NodeCondition",setup(l){const e=M("currentEffect"),n=z(()=>e?.value.condition.includes(" = ")||e?.value.condition.includes("=")&&!e?.value.condition.includes("==")&&e?.value.condition[e?.value.condition.length-1]!=="=");return G(e,["errorBehaviour"]),(t,o)=>s(e)?(m(),k(V,{key:0},[d(N,{title:"Branch"}),d(h,{title:"Condition*",for:"condition"},{default:y(()=>[a("div",po,[S(a("input",{id:"condition","onUpdate:modelValue":o[0]||(o[0]=i=>s(e).condition=i),type:"text",class:oe({required:s(e).condition.length===0,warning:n.value})},null,2),[[A,s(e).condition]]),o[2]||(o[2]=E()),d(R),n.value?(m(),k("span",mo," Equality checks should use double ==.")):O("",!0)])]),_:1}),d(N,{title:"Additional Options"}),a("div",vo,[d(h,{title:"Error Behaviour",for:"error"},{default:y(()=>[S(a("select",{id:"error","onUpdate:modelValue":o[1]||(o[1]=i=>s(e).errorBehaviour=i),title:"Error Behaviour",class:"ghost"},o[3]||(o[3]=[a("option",{value:"true"}," Treat as True ",-1),a("option",{value:"false"}," Treat as False ",-1),a("option",{value:"both"}," Run both ",-1),a("option",{value:"neither"}," Neither ",-1),a("option",{value:"raise"}," Raise ",-1)]),512),[[Q,s(e).errorBehaviour]])]),_:1})])],64)):O("",!0)}}),yo=U(go,[["__scopeId","data-v-862614c8"]]),ho={class:"input-wrapper"},bo={class:"two-wide"},wo=I({__name:"NodeTempHP",setup(l){const e=M("currentEffect");return P(()=>e.value?.higher,()=>{for(const n in e.value.higher){const t=Number.parseInt(n);e.value.higher[t]===""&&delete e.value.higher[t]}},{deep:!0}),We(()=>{Object.values(e.value.higher||{}).some(n=>n!=="")||delete e.value.higher}),Object.hasOwn(e.value,"higher")||(e.value.higher={}),G(e,["cantripScale"]),(n,t)=>s(e)?(m(),k(V,{key:0},[d(N,{title:"Temp HP"}),d(h,{title:"Amount",for:"amount"},{default:y(()=>[a("div",ho,[S(a("input",{id:"amount","onUpdate:modelValue":t[0]||(t[0]=o=>s(e).amount=o),type:"text"},null,512),[[A,s(e).amount]]),d(ye)])]),_:1}),d(N,{title:"Additional Options"}),a("div",bo,[d(h,{title:"Scales like Cantrip",for:"cantripScale"},{default:y(()=>[a("span",null,[S(a("input",{id:"cantripScale","onUpdate:modelValue":t[1]||(t[1]=o=>s(e).cantripScale=o),type:"checkbox"},null,512),[[H,s(e).cantripScale]]),t[3]||(t[3]=E()),t[4]||(t[4]=a("label",{for:"cantripScale"}," Whether this roll should scale like a cantrip. ",-1))])]),_:1}),d(h,{title:"At higher levels",for:"higherLevels"},{default:y(()=>[d(Ze,{modelValue:s(e).higher,"onUpdate:modelValue":t[2]||(t[2]=o=>s(e).higher=o)},null,8,["modelValue"])]),_:1})])],64)):O("",!0)}}),ko=U(wo,[["__scopeId","data-v-3d8b398a"]]),So={class:"two-wide"},$o={class:"input-wrapper"},_o={class:"two-wide"},Oo={class:"two-wide"},Ao=I({__name:"NodeRoll",setup(l){const e=M("currentEffect");return P(()=>e?.value.higher,()=>{for(const n in e.value.higher){const t=Number.parseInt(n);e.value.higher[t]===""&&delete e.value.higher[t]}},{deep:!0}),We(()=>{Object.values(e.value.higher||{}).some(n=>n!=="")||delete e.value.higher}),Object.hasOwn(e.value,"higher")||(e.value.higher={}),G(e,["cantripScale","hidden","displayName","fixedValue"]),(n,t)=>s(e)?(m(),k(V,{key:0},[d(N,{title:"Roll"}),a("div",So,[d(h,{title:"Name*",for:"name"},{default:y(()=>[S(a("input",{id:"name","onUpdate:modelValue":t[0]||(t[0]=o=>s(e).name=o),type:"text"},null,512),[[A,s(e).name]])]),_:1}),d(h,{title:"Dice*",for:"dice"},{default:y(()=>[a("div",$o,[S(a("input",{id:"dice","onUpdate:modelValue":t[1]||(t[1]=o=>s(e).dice=o),type:"text"},null,512),[[A,s(e).dice]]),d(ye)])]),_:1})]),d(N,{title:"Additional Options"}),a("div",_o,[d(h,{title:"Display name",for:"displayName"},{default:y(()=>[S(a("input",{id:"displayName","onUpdate:modelValue":t[2]||(t[2]=o=>s(e).displayName=o),type:"text"},null,512),[[A,s(e).displayName]])]),_:1}),d(h,{title:"Fixed value",for:"fixedValue"},{default:y(()=>[a("span",null,[S(a("input",{id:"fixedValue","onUpdate:modelValue":t[3]||(t[3]=o=>s(e).fixedValue=o),type:"checkbox"},null,512),[[H,s(e).fixedValue]]),t[7]||(t[7]=E()),t[8]||(t[8]=a("label",{for:"fixedValue"},[E(" Whether this roll should ignore the "),a("span",{style:{display:"inline-block"}},"-d"),E(" argument and damage bonus effects.")],-1))])]),_:1}),d(h,{title:"Hidden",for:"hidden"},{default:y(()=>[a("span",null,[S(a("input",{id:"hidden","onUpdate:modelValue":t[4]||(t[4]=o=>s(e).hidden=o),type:"checkbox"},null,512),[[H,s(e).hidden]]),t[9]||(t[9]=E()),t[10]||(t[10]=a("label",{for:"overheal"},"Whether to display the roll in the Meta field, or to apply any bonuses from the -d argument.",-1))])]),_:1})]),d(N,{title:"Spell Options"}),a("div",Oo,[d(h,{title:"At higher levels",for:"higherLevels"},{default:y(()=>[d(Ze,{modelValue:s(e).higher,"onUpdate:modelValue":t[5]||(t[5]=o=>s(e).higher=o)},null,8,["modelValue"])]),_:1}),d(h,{title:"Scales like Cantrip",for:"cantripScale"},{default:y(()=>[a("span",null,[S(a("input",{id:"cantripScale","onUpdate:modelValue":t[6]||(t[6]=o=>s(e).cantripScale=o),type:"checkbox"},null,512),[[H,s(e).cantripScale]]),t[11]||(t[11]=E()),t[12]||(t[12]=a("label",{for:"cantripScale"}," Whether this roll should scale like a cantrip. ",-1))])]),_:1})])],64)):O("",!0)}}),Eo=U(Ao,[["__scopeId","data-v-290524f8"]]),Vo={class:"two-wide"},No={class:"input-wrapper"},Co={class:"input-wrapper"},To={class:"two-wide"},Io=I({__name:"NodeUseCounter",setup(l){const e=M("currentEffect");M("currentContext");const n=q("cc");P(n,o=>{o==="cc"?e.value.counter="":o==="ss"?e.value.counter={slot:1}:o==="abi"&&(e.value.counter={id:0,typeId:0})},{immediate:!0}),Object.hasOwn(e.value,"errorBehaviour")||(e.value.errorBehaviour="warn"),P(()=>e.value?.errorBehaviour,()=>{e.value?.errorBehaviour==="warn"&&delete e.value.errorBehaviour});const t=q();return fe(async()=>{const{data:o}=await de("https://api.avrae.io/gamedata/limiteduse");o&&(t.value=o.data.filter(i=>i.type==="Limited Use"))}),G(e,["allowOverflow","fixedValue"]),(o,i)=>s(e)?(m(),k(V,{key:0},[i[15]||(i[15]=a("h3",null," Use Counter Node",-1)),a("div",Vo,[d(h,{title:"Counter Type",for:"counterType"},{default:y(()=>[S(a("select",{id:"counterType","onUpdate:modelValue":i[0]||(i[0]=r=>n.value=r),title:"Error Behaviour",class:"ghost"},i[7]||(i[7]=[a("option",{value:"cc"}," Custom Counter ",-1),a("option",{value:"ss"}," Spell Slot ",-1),a("option",{value:"abi"}," Ability ",-1)]),512),[[Q,n.value]])]),_:1}),n.value==="cc"?(m(),D(h,{key:0,title:"Counter Name*",for:"counterName"},{default:y(()=>[S(a("input",{id:"counterName","onUpdate:modelValue":i[1]||(i[1]=r=>s(e).counter=r),type:"text",class:oe({required:s(e).counter.length===0})},null,2),[[A,s(e).counter]])]),_:1})):O("",!0),n.value==="ss"?(m(),D(h,{key:1,title:"Slot Level*",for:"slotLevel"},{default:y(()=>[a("div",No,[S(a("input",{id:"slotLevel","onUpdate:modelValue":i[2]||(i[2]=r=>s(e).counter.slot=r),type:"text",class:oe({required:s(e).counter.slot.toString().length===0})},null,2),[[A,s(e).counter.slot]]),i[8]||(i[8]=E()),d(R)])]),_:1})):O("",!0),n.value==="abi"?(m(),D(h,{key:2,title:"Ability Reference",for:"abilityReference"},{default:y(()=>i[9]||(i[9]=[a("span",{style:{color:"var(--color-destructive)"}}," Ability Reference is not implemented in this editor.",-1)])),_:1})):O("",!0),n.value!=="abi"?(m(),D(h,{key:3,title:"Amount",for:"amount"},{default:y(()=>[a("div",Co,[S(a("input",{id:"amount","onUpdate:modelValue":i[3]||(i[3]=r=>s(e).amount=r),type:"text"},null,512),[[A,s(e).amount]]),d(R)])]),_:1})):O("",!0)]),i[16]||(i[16]=a("hr",null,null,-1)),i[17]||(i[17]=a("h4",null," Additional Options",-1)),a("div",To,[d(h,{title:"Allow Overflow",for:"allowOverflow"},{default:y(()=>[a("span",null,[S(a("input",{id:"allowOverflow","onUpdate:modelValue":i[4]||(i[4]=r=>s(e).allowOverflow=r),type:"checkbox"},null,512),[[H,s(e).allowOverflow]]),i[10]||(i[10]=E()),i[11]||(i[11]=a("label",{for:"allowOverflow"}," If False, attempting to overflow/underflow a counter (i.e. use more charges than available or add charges exceeding max) will error instead of clipping to bounds. ",-1))])]),_:1}),d(h,{title:"Fixed value",for:"fixedValue"},{default:y(()=>[a("span",null,[S(a("input",{id:"fixedValue","onUpdate:modelValue":i[5]||(i[5]=r=>s(e).fixedValue=r),type:"checkbox"},null,512),[[H,s(e).fixedValue]]),i[12]||(i[12]=E()),i[13]||(i[13]=a("label",{for:"fixedValue"},[E(" Whether this roll should ignore the "),a("span",{style:{display:"inline-block"}},"-d"),E(" argument and damage bonus effects.")],-1))])]),_:1}),d(h,{title:"Error Behaviour",for:"error"},{default:y(()=>[S(a("select",{id:"error","onUpdate:modelValue":i[6]||(i[6]=r=>s(e).errorBehaviour=r),title:"Error Behaviour",class:"ghost"},i[14]||(i[14]=[a("option",{value:"warn"}," Warn ",-1),a("option",{value:"raise"}," Raise ",-1),a("option",{value:"ignore"}," Ignore ",-1)]),512),[[Q,s(e).errorBehaviour]])]),_:1})])],64)):O("",!0)}}),Mo=U(Io,[["__scopeId","data-v-0d9d1039"]]),Uo={class:"two-wide"},Bo=["value"],Lo={class:"two-wide"},xo={class:"input-wrapper"},jo={class:"input-wrapper"},Do={class:"input-wrapper"},Po=I({__name:"NodeSpell",setup(l){const e=M("currentEffect"),n=q([]);return fe(async()=>{const{success:t,data:o}=await de("https://api.avrae.io/gamedata/spells");if(t){const i=[];for(const r of Object.entries(o.data))i.push({label:r[0],id:r[1]});n.value=i}}),G(e,["level","attackBonus","castingMod","parent"]),(t,o)=>{const i=ee("v-select");return s(e)?(m(),k(V,{key:0},[d(N,{title:"Cast Spell"}),d(h,{title:"Spell",for:"spell"},{default:y(()=>[d(i,{modelValue:s(e).id,"onUpdate:modelValue":o[0]||(o[0]=r=>s(e).id=r),options:n.value,"input-id":"spell",label:"label",reduce:r=>r.id,clearable:!1,placeholder:"(default level)"},null,8,["modelValue","options","reduce"])]),_:1}),d(N,{title:"Additional Options"}),a("div",Uo,[d(h,{title:"Level",for:"level"},{default:y(()=>[S(a("select",{id:"level","onUpdate:modelValue":o[1]||(o[1]=r=>s(e).level=r),class:"ghost"},[o[6]||(o[6]=a("option",{value:null}," (default level) ",-1)),(m(),k(V,null,K(10,r=>a("option",{key:r,value:r-1},Z(r-1),9,Bo)),64))],512),[[Q,s(e).level]])]),_:1}),d(h,{title:"Parent Effect",for:"parent"},{default:y(()=>[S(a("input",{id:"parent","onUpdate:modelValue":o[2]||(o[2]=r=>s(e).parent=r),type:"text"},null,512),[[A,s(e).parent]])]),_:1})]),d(N,{title:"Caster Spellcasting Override"}),a("div",Lo,[d(h,{title:"DC",for:"dc"},{default:y(()=>[a("div",xo,[S(a("input",{id:"dc","onUpdate:modelValue":o[3]||(o[3]=r=>s(e).dc=r),type:"text"},null,512),[[A,s(e).dc]]),d(R)])]),_:1}),d(h,{title:"Attack Bonus",for:"attackBonus"},{default:y(()=>[a("div",jo,[S(a("input",{id:"attackBonus","onUpdate:modelValue":o[4]||(o[4]=r=>s(e).attackBonus=r),type:"text"},null,512),[[A,s(e).attackBonus]]),d(R)])]),_:1}),d(h,{title:"Casting Modifier",for:"castingMod"},{default:y(()=>[a("div",Do,[S(a("input",{id:"castingMod","onUpdate:modelValue":o[5]||(o[5]=r=>s(e).castingMod=r),type:"text"},null,512),[[A,s(e).castingMod]]),d(R)])]),_:1})])],64)):O("",!0)}}}),Fo=U(Po,[["__scopeId","data-v-ffff147d"]]),X="annotatedstring",ue="intexpression",Be=[{label:"Bludgeoning",value:"bludgeoning"},{label:"Piercing",value:"piercing"},{label:"Slashing",value:"slashing"},{label:"Acid",value:"acid"},{label:"Cold",value:"cold"},{label:"Fire",value:"fire"},{label:"Force",value:"force"},{label:"Lightning",value:"lightning"},{label:"Necrotic",value:"necrotic"},{label:"Poison",value:"poison"},{label:"Psychic",value:"psychic"},{label:"Radiant",value:"radiant"},{label:"Thunder",value:"thunder"}],Ct=[{label:"All",value:"all"},{label:"Strength",value:"str"},{label:"Dexterity",value:"dex"},{label:"Constitution",value:"con"},{label:"Intelligence",value:"int"},{label:"Wisdom",value:"wis"},{label:"Charisma",value:"cha"}],Tt=[{label:"All",value:"all"},{label:"Acrobatics",value:"acrobatics"},{label:"Animal Handling",value:"animalHandling"},{label:"Arcana",value:"arcana"},{label:"Athletics",value:"athletics"},{label:"Deception",value:"deception"},{label:"History",value:"history"},{label:"Initiative",value:"initiative"},{label:"Insight",value:"insight"},{label:"Intimidation",value:"intimidation"},{label:"Investigation",value:"investigation"},{label:"Medicine",value:"medicine"},{label:"Nature",value:"nature"},{label:"Perception",value:"perception"},{label:"Performance",value:"performance"},{label:"Persuasion",value:"persuasion"},{label:"Religion",value:"religion"},{label:"Sleight of Hand",value:"sleightOfHand"},{label:"Stealth",value:"stealth"},{label:"Survival",value:"survival"},{label:"Strength",value:"strength"},{label:"Dexterity",value:"dexterity"},{label:"Constitution",value:"constitution"},{label:"Intelligence",value:"intelligence"},{label:"Wisdom",value:"wisdom"},{label:"Charisma",value:"charisma"}],Le=[{label:"Attack Advantage",value:"attack_advantage",type:ue,defaultOptions:[{label:"Flat",value:"0"},{label:"Advantage",value:"1"},{label:"Disadvantage",value:"-1"},{label:"Elven Accuracy",value:"2"}]},{label:"To Hit Bonus",value:"to_hit_bonus",type:X},{label:"Damage Bonus",value:"damage_bonus",type:X},{label:"Magical Damage",value:"magical_damage",type:ue,defaultOptions:[{label:"True",value:"1"}]},{label:"Silvered Damage",value:"silvered_damage",type:ue,defaultOptions:[{label:"True",value:"1"}]},{label:"Resistance",value:"resistances",type:X,isList:!0,defaultOptions:Be},{label:"Immunity",value:"immunities",type:X,isList:!0,defaultOptions:Be},{label:"Vulnerability",value:"vulnerabilities",type:X,isList:!0,defaultOptions:Be},{label:"Ignore Resistance",value:"ignored_resistances",type:X,isList:!0,defaultOptions:Be},{label:"Set AC",value:"ac_value",type:ue},{label:"AC Bonus",value:"ac_bonus",type:ue},{label:"Set Max HP",value:"max_hp_value",type:ue},{label:"Max HP Bonus",value:"max_hp_bonus",type:ue},{label:"Saving Throw Bonus",value:"save_bonus",type:X},{label:"Saving Throw Advantage",value:"save_adv",type:X,isList:!0,defaultOptions:Ct},{label:"Saving Throw Disadvantage",value:"save_dis",type:X,isList:!0,defaultOptions:Ct},{label:"Ability Check Bonus",value:"check_bonus",type:X},{label:"Ability Check Advantage",value:"check_adv",type:X,isList:!0,defaultOptions:Tt},{label:"Ability Check Disadvantage",value:"check_dis",type:X,isList:!0,defaultOptions:Tt},{label:"DC Bonus",value:"dc_bonus",type:ue}],Ro={class:"two-wide"},qo={class:"input-wrapper"},Jo={class:"two-wide"},Ho={class:"input-wrapper"},Ko={key:0,class:"input-wrapper"},Wo=["id","onUpdate:modelValue"],Qo={key:1},zo={class:"two-wide"},Go={class:"two-wide"},Yo={class:"input-wrapper"},Zo={class:"two-wide"},Xo=I({__name:"NodeIEffect",setup(l){const e=M("currentEffect"),n=z(()=>e?.value?.effects?Le.filter(u=>!Object.keys(e.value.effects).includes(u.value)):Le),t=u=>{e.value.effects||(e.value.effects={}),u.isList?e.value.effects[u.value]=[]:(u.type==="intexpression"||u.type==="annotatedstring")&&(e.value.effects[u.value]="1")},o=u=>{for(const f of Le)if(f.value===u)return f},i=u=>{const f=o(u);if(f)return f.defaultOptions?"list":f.type==="annotatedstring"?"annotatedstring":f.type==="intexpression"?"intexpression":"list"};e?.value.effects||(e.value.effects={});const r=()=>{e?.value?.buttons||(e.value.buttons=[]),e.value.buttons.push({automation:[],label:"New Button"})},c=()=>{e?.value?.attacks||(e.value.attacks=[]),e.value.attacks.push({attack:{name:"New Attack",automation:[],_v:2}})};return G(e,["end","tick_on_caster","conc","desc","save_as","parent","target_self","stacking"],{effects:Le.map(u=>u.value)}),(u,f)=>{const w=ee("v-select");return s(e)?(m(),k(V,{key:0},[d(N,{title:"Initiative Effect"}),a("div",Ro,[d(h,{title:"Name*",for:"name"},{default:y(()=>[a("div",qo,[S(a("input",{id:"name","onUpdate:modelValue":f[0]||(f[0]=p=>s(e).name=p),type:"text",class:oe({required:s(e).name.length===0})},null,2),[[A,s(e).name]]),d(ye)])]),_:1})]),d(N,{title:"Duration Options"}),a("div",Jo,[d(h,{title:"Duration",for:"duration"},{default:y(()=>[a("div",Ho,[S(a("input",{id:"duration","onUpdate:modelValue":f[1]||(f[1]=p=>s(e).duration=p),type:"text"},null,512),[[A,s(e).duration]]),f[13]||(f[13]=E()),d(R)])]),_:1}),d(h,{title:"Ticks on End",for:"end"},{default:y(()=>[a("span",null,[S(a("input",{id:"end","onUpdate:modelValue":f[2]||(f[2]=p=>s(e).end=p),type:"checkbox"},null,512),[[H,s(e).end]]),f[14]||(f[14]=E()),f[15]||(f[15]=a("label",{for:"end"},"Ticks on end of turn.",-1))])]),_:1}),d(h,{title:"Ticks on Caster",for:"caster"},{default:y(()=>[a("span",null,[S(a("input",{id:"caster","onUpdate:modelValue":f[3]||(f[3]=p=>s(e).tick_on_caster=p),type:"checkbox"},null,512),[[H,s(e).tick_on_caster]]),f[16]||(f[16]=E()),f[17]||(f[17]=a("label",{for:"caster"},"Ticks on Caster rather than the Target.",-1))])]),_:1}),d(h,{title:"Requires concentration",for:"conc"},{default:y(()=>[a("span",null,[S(a("input",{id:"conc","onUpdate:modelValue":f[4]||(f[4]=p=>s(e).conc=p),type:"checkbox"},null,512),[[H,s(e).conc]]),f[18]||(f[18]=E()),f[19]||(f[19]=a("label",{for:"conc"},"Requires concentration.",-1))])]),_:1})]),d(N,{title:"Passive Effects"}),(m(!0),k(V,null,K(s(e).effects,(p,v)=>(m(),D(h,{key:v,title:o(v)?.label||"",for:v,style:{"margin-top":"1rem"}},{default:y(()=>[i(v)!=="list"?(m(),k("div",Ko,[S(a("input",{id:v,"onUpdate:modelValue":b=>s(e).effects[v]=b,type:"text"},null,8,Wo),[[A,s(e).effects[v]]]),i(v)==="annotatedstring"?(m(),D(ye,{key:0})):(m(),D(R,{key:1}))])):(m(),k("div",Qo,[d(w,{modelValue:s(e).effects[v],"onUpdate:modelValue":b=>s(e).effects[v]=b,taggable:"",options:o(v)?.defaultOptions,"input-id":v,multiple:o(v)?.isList,reduce:b=>b.value,"create-option":b=>({label:b,value:b})},null,8,["modelValue","onUpdate:modelValue","options","input-id","multiple","reduce","create-option"])]))]),_:2},1032,["title","for"]))),128)),d(h,{title:"New Passive Effect",for:"newPassiveEffect",style:{"margin-top":"1rem"},class:"standout"},{default:y(()=>[a("div",zo,[d(w,{options:n.value,"onOption:selected":f[5]||(f[5]=p=>t(p))},null,8,["options"])])]),_:1}),d(N,{title:"Buttons & Attacks"}),a("div",Go,[d(h,{title:"New Button",for:"addButton "},{default:y(()=>[a("button",{id:"addButton",class:"btn",onClick:f[6]||(f[6]=p=>r())}," Add a button ")]),_:1}),d(h,{title:"New Attack",for:"addAttack "},{default:y(()=>[a("button",{id:"addButton",class:"btn",onClick:f[7]||(f[7]=p=>c())}," Add an attack ")]),_:1})]),f[24]||(f[24]=a("small",null," Manage individual buttons and attacks by selecting them in the Effect Tree. ",-1)),d(N,{title:"Additional Options"}),d(h,{title:"Description",for:"text",style:{"margin-bottom":"1rem"}},{default:y(()=>[a("div",Yo,[S(a("textarea",{id:"text","onUpdate:modelValue":f[8]||(f[8]=p=>s(e).desc=p),rows:"40",placeholder:"Description"},null,512),[[A,s(e).desc]]),d(ye)])]),_:1}),a("div",Zo,[d(h,{title:"Save As",for:"saveAs"},{default:y(()=>[S(a("input",{id:"saveAs","onUpdate:modelValue":f[9]||(f[9]=p=>s(e).save_as=p),type:"text"},null,512),[[A,s(e).save_as]])]),_:1}),d(h,{title:"Parent",for:"parent"},{default:y(()=>[S(a("input",{id:"parent","onUpdate:modelValue":f[10]||(f[10]=p=>s(e).parent=p),type:"text"},null,512),[[A,s(e).parent]])]),_:1}),d(h,{title:"Effect Stacking",for:"effectStacking"},{default:y(()=>[a("span",null,[S(a("input",{id:"effectStacking","onUpdate:modelValue":f[11]||(f[11]=p=>s(e).stacking=p),type:"checkbox"},null,512),[[H,s(e).stacking]]),f[20]||(f[20]=E()),f[21]||(f[21]=a("label",{for:"effectStacking"},"Ticks on end of turn.",-1))])]),_:1}),d(h,{title:"Target Self",for:"targetSelf"},{default:y(()=>[a("span",null,[S(a("input",{id:"targetSelf","onUpdate:modelValue":f[12]||(f[12]=p=>s(e).target_self=p),type:"checkbox"},null,512),[[H,s(e).target_self]]),f[22]||(f[22]=E()),f[23]||(f[23]=a("label",{for:"end"},"Target Self",-1))])]),_:1})])],64)):O("",!0)}}}),ei=U(Xo,[["__scopeId","data-v-6b5412ba"]]),ti={class:"two-wide"},ni={class:"two-wide"},li=["value"],oi={class:"two-wide"},ii=I({__name:"NodeRoot",setup(l){const e=M("currentEffect");return G(e,["thumb","verb","proper","phrase","criton","extra_crit_damage","activation_type"]),(n,t)=>s(e)?(m(),k(V,{key:0},[d(N,{title:"Attack Model"}),a("div",ti,[d(h,{title:"Attack Name*",for:"name"},{default:y(()=>[S(a("input",{id:"name","onUpdate:modelValue":t[0]||(t[0]=o=>s(e).name=o),type:"text",class:oe({required:s(e).name.length===0})},null,2),[[A,s(e).name]])]),_:1}),d(h,{title:"Thumbnail URL",for:"thumb"},{default:y(()=>[S(a("input",{id:"thumb","onUpdate:modelValue":t[1]||(t[1]=o=>s(e).thumb=o),type:"text"},null,512),[[A,s(e).thumb]])]),_:1}),d(h,{title:"Verb",for:"verb"},{default:y(()=>[S(a("input",{id:"verb","onUpdate:modelValue":t[2]||(t[2]=o=>s(e).verb=o),type:"text",placeholder:"attacks with"},null,512),[[A,s(e).verb]])]),_:1}),d(h,{title:"Proper Noun",for:"proper"},{default:y(()=>[a("span",null,[S(a("input",{id:"proper","onUpdate:modelValue":t[3]||(t[3]=o=>s(e).proper=o),type:"checkbox"},null,512),[[H,s(e).proper]]),t[8]||(t[8]=E()),t[9]||(t[9]=a("label",{for:"proper"},"Name is proper noun",-1))])]),_:1})]),d(h,{title:"Flavor Text",for:"text",style:{"margin-top":"1rem"}},{default:y(()=>[S(a("textarea",{id:"text","onUpdate:modelValue":t[4]||(t[4]=o=>s(e).phrase=o),rows:"20",placeholder:"Flavor text"},null,512),[[A,s(e).phrase]])]),_:1}),a("div",ni,[d(h,{title:"Crit On",for:"criton"},{default:y(()=>[S(a("select",{id:"criton","onUpdate:modelValue":t[5]||(t[5]=o=>s(e).criton=o),class:"ghost"},[t[10]||(t[10]=a("option",{value:null}," (crit on 20) ",-1)),(m(),k(V,null,K(20,o=>a("option",{key:20-o,value:20-o},Z(20-o),9,li)),64))],512),[[Q,s(e).criton]])]),_:1}),d(h,{title:"Extra Crit Damage",for:"critdamage"},{default:y(()=>[S(a("input",{id:"critdamage","onUpdate:modelValue":t[6]||(t[6]=o=>s(e).extra_crit_damage=o),type:"text"},null,512),[[A,s(e).extra_crit_damage]])]),_:1})]),d(N,{title:"Additional Options"}),a("div",oi,[d(h,{title:"Action Type",for:"activationType"},{default:y(()=>[S(a("select",{id:"activationType","onUpdate:modelValue":t[7]||(t[7]=o=>s(e).activation_type=o),title:"Activation Type",class:"ghost"},t[11]||(t[11]=[a("option",{value:""}," Attack ",-1),a("option",{value:1}," Action ",-1),a("option",{value:2}," No Action ",-1),a("option",{value:3}," Bonus Action ",-1),a("option",{value:4}," Reaction ",-1),a("option",{value:6}," Minute ",-1),a("option",{value:7}," Hour ",-1),a("option",{value:8}," Special ",-1),a("option",{value:9}," Legendary ",-1),a("option",{value:10}," Mythic ",-1),a("option",{value:11}," Lair ",-1)]),512),[[Q,s(e).activation_type]])]),_:1})])],64)):O("",!0)}}),ai=U(ii,[["__scopeId","data-v-efdc4dd5"]]),ri={class:"two-wide"},si={class:"input-wrapper"},ui={class:"two-wide",style:{"margin-top":".5rem"}},di={class:"input-wrapper"},fi={class:"input-wrapper"},ci={class:"input-wrapper"},pi=I({__name:"NodeButtonRoot",setup(l){const e=M("currentEffect");G(e,["verb","style"]);const n=q(!1);return P(()=>e.value?.style,()=>{const t=e?.value.style;!t||t&&["1","2","3","4"].includes(t)?n.value=!1:n.value=!0}),(t,o)=>s(e)?(m(),k(V,{key:0},[d(N,{title:`Button (${s(e).label})`},null,8,["title"]),a("div",ri,[d(h,{title:"Button Label*",for:"label"},{default:y(()=>[S(a("input",{id:"label","onUpdate:modelValue":o[0]||(o[0]=i=>s(e).label=i),type:"text",class:oe({required:s(e).label.length===0})},null,2),[[A,s(e).label]])]),_:1}),d(h,{title:"Verb",for:"verb"},{default:y(()=>[S(a("input",{id:"verb","onUpdate:modelValue":o[1]||(o[1]=i=>s(e).verb=i),type:"text",placeholder:"attacks with"},null,512),[[A,s(e).verb]])]),_:1}),d(h,{title:"Button Style",for:"style"},{default:y(()=>[S(a("select",{id:"style","onUpdate:modelValue":o[2]||(o[2]=i=>s(e).style=i),class:"ghost"},o[7]||(o[7]=[a("option",{value:null,style:{color:"#5865F2"}}," Blurple (default) ",-1),a("option",{value:"2",style:{color:"#4E5058"}}," Grey ",-1),a("option",{value:"3",style:{color:"#248045"}}," Green ",-1),a("option",{value:"4",style:{color:"#DA373C"}}," Red ",-1),a("option",{value:"custom"}," Custom Expression ",-1)]),512),[[Q,s(e).style]])]),_:1})]),n.value?(m(),D(h,{key:0,title:"Custom Style Expression"},{default:y(()=>[a("div",si,[S(a("input",{id:"slotLevel","onUpdate:modelValue":o[3]||(o[3]=i=>s(e).style=i),type:"text"},null,512),[[A,s(e).style]]),o[8]||(o[8]=E()),d(R)])]),_:1})):O("",!0),d(N,{title:"Casting Overrides"}),o[15]||(o[15]=a("small",null," Use these options to pass casting information about the caster to the button, or arbritary number variables you can use for anything, such as a number of dice. ",-1)),a("div",ui,[d(h,{title:"Default DC",for:"defaultDc"},{default:y(()=>[a("div",di,[S(a("input",{id:"defaultDc","onUpdate:modelValue":o[4]||(o[4]=i=>s(e).defaultDC=i),type:"text"},null,512),[[A,s(e).defaultDC]]),o[9]||(o[9]=E()),d(R)]),o[10]||(o[10]=a("code",null,"spell_dc ",-1))]),_:1}),d(h,{title:"Default Attack Bonus",for:"defaultAttack"},{default:y(()=>[a("div",fi,[S(a("input",{id:"defaultAttack","onUpdate:modelValue":o[5]||(o[5]=i=>s(e).defaultAttackBonus=i),type:"text"},null,512),[[A,s(e).defaultAttackBonus]]),o[11]||(o[11]=E()),d(R)]),o[12]||(o[12]=a("code",null," spell_attack_bonus",-1))]),_:1}),d(h,{title:"Default Casting Modifier",for:"defaultCastingMod"},{default:y(()=>[a("div",ci,[S(a("input",{id:"defaultCastingMod","onUpdate:modelValue":o[6]||(o[6]=i=>s(e).defaultCastingMod=i),type:"text"},null,512),[[A,s(e).defaultCastingMod]]),o[13]||(o[13]=E()),d(R)]),o[14]||(o[14]=a("code",null," spell",-1))]),_:1})])],64)):O("",!0)}}),mi=U(pi,[["__scopeId","data-v-2dda4a1d"]]),vi={class:"two-wide"},gi={class:"two-wide"},yi=["value"],hi={class:"two-wide"},bi=I({__name:"NodeIAttackRoot",setup(l){const e=M("currentEffect");return G(e,["defaultAttackBonus","defaultCastingMod","defaultDC"],{attack:["activation_type","criton","extra_crit_damage","phrase","proper","thumb","verb"]}),(n,t)=>s(e)?(m(),k(V,{key:0},[d(N,{title:`Attack (${s(e).attack.name})`},null,8,["title"]),a("div",vi,[d(h,{title:"Attack Name*",for:"name"},{default:y(()=>[S(a("input",{id:"name","onUpdate:modelValue":t[0]||(t[0]=o=>s(e).attack.name=o),type:"text",class:oe({required:s(e).attack.name.length===0})},null,2),[[A,s(e).attack.name]])]),_:1}),d(h,{title:"Thumbnail URL",for:"thumb"},{default:y(()=>[S(a("input",{id:"thumb","onUpdate:modelValue":t[1]||(t[1]=o=>s(e).attack.thumb=o),type:"text"},null,512),[[A,s(e).attack.thumb]])]),_:1}),d(h,{title:"Verb",for:"verb"},{default:y(()=>[S(a("input",{id:"verb","onUpdate:modelValue":t[2]||(t[2]=o=>s(e).attack.verb=o),type:"text",placeholder:"attacks with"},null,512),[[A,s(e).attack.verb]])]),_:1}),d(h,{title:"Proper Noun",for:"proper"},{default:y(()=>[a("span",null,[S(a("input",{id:"proper","onUpdate:modelValue":t[3]||(t[3]=o=>s(e).attack.proper=o),type:"checkbox"},null,512),[[H,s(e).attack.proper]]),t[8]||(t[8]=E()),t[9]||(t[9]=a("label",{for:"proper"},"Name is proper noun",-1))])]),_:1})]),d(h,{title:"Flavor Text",for:"text",style:{"margin-top":"1rem"}},{default:y(()=>[S(a("textarea",{id:"text","onUpdate:modelValue":t[4]||(t[4]=o=>s(e).attack.phrase=o),rows:"20",placeholder:"Flavor text"},null,512),[[A,s(e).attack.phrase]])]),_:1}),a("div",gi,[d(h,{title:"Crit On",for:"criton"},{default:y(()=>[S(a("select",{id:"criton","onUpdate:modelValue":t[5]||(t[5]=o=>s(e).attack.criton=o),class:"ghost"},[t[10]||(t[10]=a("option",{value:null}," (crit on 20) ",-1)),(m(),k(V,null,K(20,o=>a("option",{key:20-o,value:20-o},Z(20-o),9,yi)),64))],512),[[Q,s(e).attack.criton]])]),_:1}),d(h,{title:"Extra Crit Damage",for:"critdamage"},{default:y(()=>[S(a("input",{id:"critdamage","onUpdate:modelValue":t[6]||(t[6]=o=>s(e).attack.extra_crit_damage=o),type:"text"},null,512),[[A,s(e).attack.extra_crit_damage]])]),_:1})]),d(N,{title:"Additional Options"}),a("div",hi,[d(h,{title:"Action Type",for:"activationType"},{default:y(()=>[S(a("select",{id:"activationType","onUpdate:modelValue":t[7]||(t[7]=o=>s(e).attack.activation_type=o),title:"Activation Type",class:"ghost"},t[11]||(t[11]=[a("option",{value:null}," Attack ",-1),a("option",{value:1}," Action ",-1),a("option",{value:2}," No Action ",-1),a("option",{value:3}," Bonus Action ",-1),a("option",{value:4}," Reaction ",-1),a("option",{value:6}," Minute ",-1),a("option",{value:7}," Hour ",-1),a("option",{value:8}," Special ",-1),a("option",{value:9}," Legendary ",-1),a("option",{value:10}," Mythic ",-1),a("option",{value:11}," Lair ",-1)]),512),[[Q,s(e).attack.activation_type]])]),_:1})])],64)):O("",!0)}}),wi=U(bi,[["__scopeId","data-v-e15c608e"]]),ki=I({__name:"NodeHelper",props:{node:{}},setup(l){const e=l,n=z(()=>e.node==="text"?hl:e.node==="variable"?Nl:e.node==="target"?Kl:e.node==="remove_ieffect"?zl:e.node==="save"?eo:e.node==="attack"?ro:e.node==="damage"?co:e.node==="condition"?yo:e.node==="temphp"?ko:e.node==="roll"?Eo:e.node==="counter"?Mo:e.node==="spell"?Fo:e.node==="ieffect2"?ei:e.node==="noderoot"?ai:e.node==="buttonroot"?mi:e.node==="attackroot"?wi:"div");return(t,o)=>(m(),k("div",null,[(m(),D(Yt(n.value)))]))}}),Si={key:0},$i=I({__name:"EffectAsRaw",setup(l){const e=M("currentEffect"),n=z(()=>{if(!e||!e.value)return{};const t=structuredClone(Zt(e.value));return Object.hasOwn(t,"effects")&&Object.hasOwn(t,"type")&&t.type!=="ieffect2"&&(t.effects=["..."]),Object.hasOwn(t,"onFalse")&&(t.onFalse=["..."]),Object.hasOwn(t,"onTrue")&&(t.onTrue=["..."]),Object.hasOwn(t,"fail")&&(t.fail=["..."]),Object.hasOwn(t,"success")&&(t.success=["..."]),Object.hasOwn(t,"hit")&&(t.hit=["..."]),Object.hasOwn(t,"miss")&&(t.miss=["..."]),t});return(t,o)=>s(e)?(m(),k("details",Si,[o[0]||(o[0]=a("summary",null," Show effect as JSON",-1)),a("div",null,Z(JSON.stringify(n.value,null,2)),1)])):O("",!0)}}),_i=U($i,[["__scopeId","data-v-bef038b4"]]),Oi={class:"two-wide uneven"},Ai={class:"tree"},Ei={key:1},Vi={class:"editor"},Ni=I({__name:"VisualEditor",props:Ut({name:{}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(l){const e=l,n=q(null),t=q([]);it("currentEffect",n),it("currentContext",t);const o=Bt(l,"modelValue"),i=z(()=>n.value?t.value[0]==="root"&&t.value.length===1?"noderoot":t.value[t.value.length-2]==="buttons"?"buttonroot":t.value[t.value.length-2]==="attacks"?"attackroot":Object.hasOwn(n.value,"type")?n.value.type:"":null);return(r,c)=>(m(),k("section",Oi,[a("div",Ai,[c[0]||(c[0]=a("h3",null," Effect Tree",-1)),o.value?(m(),D(dt,{key:0,data:o.value,depth:-1},null,8,["data"])):(m(),k("div",Ei,[d(He,{context:["root"],name:e.name},null,8,["name"])]))]),a("div",Vi,[d(Xe,null,{default:y(()=>[n.value?(m(),D(ki,{key:t.value.toString(),node:i.value},null,8,["node"])):O("",!0)]),_:1}),c[1]||(c[1]=a("hr",null,null,-1)),d(Xe,null,{default:y(()=>[(m(),D(ml,{key:t.value.toString(),"node-type":i.value},null,8,["node-type"]))]),_:1}),d(Xe,null,{default:y(()=>[(m(),D(_i,{key:t.value.toString()}))]),_:1})]),c[2]||(c[2]=a("div",{id:"effectAdderContainer"},null,-1))]))}}),Ci=U(Ni,[["__scopeId","data-v-768b7244"]]),Ti={class:"vertical-container"},Ii={class:"two-wide"},Mi={class:"two-wide"},Ui={class:"editor-field__container"},Bi=["minlength","maxlength"],Li={class:"editor-field__container"},xi={class:"two-wide"},ji={class:"editor-field__container"},Di={class:"editor-field__container"},Pi={class:"editor-field__container"},Fi={key:0,class:"editor-field__container"},Ri={class:"editor-field__container"},qi=["maxlength"],Ji=I({__name:"AutomationEditor",props:{data:{},isStandAlone:{type:Boolean,default:!1},creatureName:{default:"$NAME$"}},emits:["savedStandaloneData"],setup(l,{emit:e}){const n=e,t=q(!1),o=q({basicExamples:[],srdFeatures:[],myAutomation:[]}),i=async(w,p)=>{const{success:v,data:b,error:_}=await de(`/api/${w}`);v?o.value[p]=b:(o.value[p]=[],se.error(_))};fe(async()=>{await i("basic-examples/list","basicExamples"),await i("srd-features/list","srdFeatures"),await i("my-automations","myAutomation")});const r=async(w,p,v=null)=>{const{success:b,data:_,error:g}=await de(`/api/${w}/${encodeURIComponent(v?.toString()??p)}`);let $=null;if(!b){se.error(`Error: ${g}`);return}if($=_,!$){se.error(`Error: Failed to import ${p}`);return}if((l.data.name==="New Feature"||!t.value)&&(w==="srd-feature"&&$.name.includes(" - ")?l.data.name=$.name.split("-").slice(1).join("-").trim():l.data.name=$.name),$.description&&(l.data.description=$.description.replaceAll("$NAME$",l.creatureName)),!$.description&&w==="basic-example"&&$.automation&&!Array.isArray($.automation)){const C=$.automation.automation[$.automation.automation.length-1];C.type==="text"&&typeof C.text=="string"&&(l.data.description=C.text)}if(Array.isArray($.automation))for(const C of $.automation)w==="srd-feature"&&C.name.includes(" - ")&&(C.name=C.name.split("-").slice(1).join("-").trim());c.value=$.automation,await u(!1)},c=q(l.data.automation);it("automation",c),fe(()=>{c.value=l.data.automation||null});const u=async(w=!1)=>{const{error:p}=await de("/api/validate/automation","POST",c.value);if(w&&p){const v=I({setup(){return()=>xe("div",{innerHTML:p})}});se(Xt(v),{duration:0}),se.error(p);return}if(l.isStandAlone&&"_id"in l.data){const{success:v,error:b}=await de(`/api/automation/${l.data._id?.toString()}/update`,"POST",l.data);if(v&&w)n("savedStandaloneData");else if(!v){w&&se.error(`${l.data.name||"Unnamed feature"}: ${b}`);return}}w&&se.success("Successfully saved automation!")},f=async()=>{const w=tn(l.data.description,l.data.name,0)[0];if(w)try{c.value=w,await u(!1)}catch{se.error("Something went when generating automation!")}};return(w,p)=>{const v=ee("font-awesome-icon"),b=ee("v-select"),_=Ke("tooltip");return m(),k("div",Ti,[a("div",Ii,[a("div",Mi,[a("div",Ui,[d(h,{title:"Feature name",for:"featurename"},{default:y(()=>[S(a("input",{id:"featurename","onUpdate:modelValue":p[0]||(p[0]=g=>w.data.name=g),type:"text",placeholder:"Enter name",minlength:s(je).limits?.nameMin,maxlength:s(je).limits?.nameLength,onChange:p[1]||(p[1]=g=>t.value=!0)},null,40,Bi),[[A,w.data.name]])]),_:1}),d(h,{title:"Save automation",for:"saveautomation"},{default:y(()=>[a("button",{id:"saveautomation",class:"btn confirm",onClick:p[2]||(p[2]=g=>u(!0))}," Save ")]),_:1})]),a("div",Li,[d(h,{title:"Generate",for:"generate"},{default:y(()=>[S((m(),k("button",{id:"generate",class:"btn",onClick:f},[p[8]||(p[8]=E(" Generate ")),d(v,{icon:["fas","circle-info"]})])),[[_,"Generate automation from description. May be incomplete or inaccurate. Only works for basic, to hit attacks."]])]),_:1})])]),a("div",xi,[a("div",ji,[a("div",Di,[d(h,{title:"Import SRD feature",for:"importsrdfeature"},{default:y(()=>[d(b,{options:o.value.srdFeatures,"input-id":"importsrdfeature","onOption:selected":p[3]||(p[3]=g=>r("srd-feature",g))},null,8,["options"])]),_:1})]),a("div",Pi,[d(h,{title:"Import basic example",for:"importbasicexample"},{default:y(()=>[d(b,{options:o.value.basicExamples,"input-id":"importbasicexample","onOption:selected":p[4]||(p[4]=g=>r("basic-example",g))},null,8,["options"])]),_:1})]),w.isStandAlone?O("",!0):(m(),k("div",Fi,[d(h,{title:"Import custom automation",for:"importcustomautomation"},{default:y(()=>[d(b,{options:o.value.myAutomation,"input-id":"importcustomautomation",label:"name","onOption:selected":p[5]||(p[5]=g=>r("automation",g.name,g._id))},null,8,["options"])]),_:1})]))]),a("div",Ri,[d(h,{title:"Feature description",for:"featuredescription"},{default:y(()=>[S(a("textarea",{id:"featuredescription","onUpdate:modelValue":p[6]||(p[6]=g=>w.data.description=g),height:"94",placeholder:"Enter description",style:{height:"135px","max-height":"135px",resize:"none"},maxlength:s(je).limits?.descriptionLength},null,8,qi),[[A,w.data.description]])]),_:1})])])]),p[9]||(p[9]=a("hr",null,null,-1)),a("div",null,[d(Ci,{modelValue:c.value,"onUpdate:modelValue":p[7]||(p[7]=g=>c.value=g),name:w.data.name},null,8,["modelValue","name"])])])}}}),zi=U(Ji,[["__scopeId","data-v-6731b68e"]]);export{zi as A,jl as L,N as S};
