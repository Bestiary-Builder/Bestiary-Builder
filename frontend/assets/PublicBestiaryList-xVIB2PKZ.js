import{d as I,e as T,f as u,q as $,g as B,s as k,h as y,i as L,o as t,j as s,k as d,w as b,l as c,v as N,m as a,u as V,x as S,y as U,c as z,n as x,t as D,z as j,F as q,_ as A}from"./index-BnguSVmB.js";import{B as E}from"./BestiaryList-D9cBQSWA.js";import{t as C,_ as O}from"./Breadcrumbs.vue_vue_type_style_index_0_lang-D1kcEJMB.js";import{$ as h}from"./loading-CBYs1_jt.js";import"./StatusIcon-COz_s1qn.js";const R={"aria-label":"Filter bestiaries"},Y={class:"v-popper__custom-menu"},G={"aria-label":"Search bestiaries"},H={class:"v-popper__custom-menu"},J={class:"content"},K={key:1,class:"zero-found"},Q={key:0},W={key:1},X={key:0,class:"page-nav__container"},Z=I({__name:"PublicBestiaryList",setup(ee){T(async()=>{const o=h.show();await v(),o.hide()});const i=u([]),n=u(1),_=u([]),p=u("Popular"),f=u(""),P=$(f,600),m=u(1),v=async()=>{const{success:o,data:e,error:r}=await B("/api/search","POST",{search:f.value,page:n.value-1,tags:_.value,mode:p.value.toLowerCase()});o?(i.value=e.results,m.value=e.pageAmount):(i.value=[],m.value=1,C.error(r))},M=async()=>{const{success:o,data:e,error:r}=await B("/api/user/bookmarks");o?i.value=e:(i.value=[],C.error(r))};return k(n,()=>v()),k(_,()=>v()),k(p,async o=>{if(o!=="Bookmarked"){const e=h.show();await v(),e.hide()}else{const e=h.show();await M(),e.hide()}}),k(P,()=>v()),(o,e)=>{const r=y("font-awesome-icon"),F=y("v-select"),w=y("VDropdown"),g=L("tooltip");return t(),s(q,null,[d(O,{routes:[{path:"",text:"Public Bestiaries",isCurrent:!0}]},{default:b(()=>[c(a("select",{"onUpdate:modelValue":e[0]||(e[0]=l=>p.value=l),"aria-label":"Select public bestiary list mode",name:"Select public bestiary list mode"},e[5]||(e[5]=[a("option",null,"Recent",-1),a("option",null,"Popular",-1),a("option",null,"Bookmarked",-1)]),512),[[N,p.value]]),d(w,{distance:6,"positioning-disabled":!1},{popper:b(()=>[a("div",Y,[e[6]||(e[6]=a("span",null,[a("label",{for:"tagsInput"},"Filter by tags")],-1)),d(F,{modelValue:_.value,"onUpdate:modelValue":e[1]||(e[1]=l=>_.value=l),placeholder:"Select Tags",multiple:"",options:V(S).tags,"input-id":"tagsInput"},null,8,["modelValue","options"])])]),default:b(()=>[c((t(),s("button",R,[d(r,{icon:["fas","tag"]})])),[[g,"Filter bestiaries"]])]),_:1}),d(w,{distance:6,"positioning-disabled":V(S).isMobile},{popper:b(()=>[a("div",H,[e[7]||(e[7]=a("span",null,[a("label",{for:"searchinput"}," Search bestiaries by name or description")],-1)),c(a("input",{id:"searchinput","onUpdate:modelValue":e[2]||(e[2]=l=>f.value=l),type:"text",placeholder:"Search by bestiary name or description"},null,512),[[U,f.value]])])]),default:b(()=>[c((t(),s("button",G,[d(r,{icon:["fas","magnifying-glass"]})])),[[g,"Search bestiaries"]])]),_:1},8,["positioning-disabled"])]),_:1}),a("div",J,[i.value&&i.value.length>0?(t(),z(E,{key:0,personal:!1,bestiaries:i.value},null,8,["bestiaries"])):(t(),s("div",K,[p.value!=="Bookmarked"?(t(),s("span",Q," Did not find any Bestiaries with that name or tags.")):(t(),s("span",W,"You do not have any bookmarked bestiaries. View a Bestiary and click on the ⭐ icon to bookmark it."))]))]),m.value>1?(t(),s("div",X,[c((t(),s("button",{"aria-label":"Decrease page number",onClick:e[3]||(e[3]=l=>n.value=Math.max(1,n.value-1))},e[8]||(e[8]=[x(" - ")]))),[[g,"Decrease page number"]]),a("span",null,D(n.value)+"/"+D(m.value),1),c((t(),s("button",{"aria-label":"Increase page number",onClick:e[4]||(e[4]=l=>n.value=Math.min(m.value,n.value+1))},e[9]||(e[9]=[x(" + ")]))),[[g,"Increase page number"]])])):j("",!0)],64)}}}),ne=A(Z,[["__scopeId","data-v-554b025c"]]);export{ne as default};
